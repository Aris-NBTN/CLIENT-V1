import{c as D,aN as _,d as j,r as n,j as e,aO as B,aP as O,N as V,T as p,ac as i,aQ as z,V as $,aR as q,aS as Q,aT as R,aU as U,aV as W,aW as X}from"./index-Ftj3_0aj.js";import{b7 as H}from"./Layout-B3M28nyH.js";import{E as y}from"./Table-wMaUFwER.js";import{F as o,a as J}from"./jspdf.es.min-DHnqiL_Z.js";import{e as K,f as Y}from"./Format-5NuCslZg.js";import{u as Z,v as ee,w as b}from"./index-BGp8naKY.js";import"./html2canvas.esm-CBrSDip1.js";import{F as s}from"./index-CDEQdea5.js";import{T as l}from"./index-C_d1lzc2.js";import{B as x}from"./button-DkewC5Mw.js";import{M as F}from"./index-BSoGMHgZ.js";import{I as T}from"./index-CcvZSDKs.js";import{T as te}from"./index-BJLNWIFV.js";import"./index-DF7Ys5Yz.js";import"./index-CJr3lxXR.js";import"./index-WVaXGypX.js";import"./Overflow-C-uCjaY3.js";import"./PurePanel-Bnt_qy0i.js";import"./CheckOutlined-C97N76ai.js";import"./index-q160Hcww.js";import"./useLocale-B6dDyN8h.js";import"./compact-item-CwR_qmY_.js";import"./SearchOutlined-BQATVaE1.js";import"./context-DWgLY0xf.js";import"./Dropdown-D6X-jJmv.js";import"./EllipsisOutlined-y0OdX5Zm.js";import"./index-DEBTHk3J.js";import"./addEventListener-DghQEVp_.js";import"./iconUtil-BdQ3JKZa.js";import"./index-DJHK0TYG.js";import"./index-BeTyp-HH.js";import"./TextArea-DxLHDA9M.js";import"./index-DXbd8Gef.js";import"./index-5EWYVEDS.js";import"./ActionButton-BHY_5SKW.js";import"./row-BilKgrsh.js";import"./index-BlyQbtbC.js";const Oe=()=>{const r=D(),A=_({query:"(max-width: 576px)"}),[h]=s.useForm(),[d]=s.useForm(),{pages:f,loading:c}=j(t=>t.pages),{groupPages:a,loading:m}=j(t=>t.groupPages),[k,u]=n.useState(!1),[I,g]=n.useState(!1),P=n.useMemo(()=>f.map(t=>({...t,key:t._id})),[f]),w=n.useMemo(()=>a.map(t=>({...t,key:t._id})),[a]),C=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,ellipsis:{showTitle:!0},...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,ellipsis:{showTitle:!0},...o({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(l.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(K,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&a.length>0?Y(t,a,"group"):null,...Array.isArray(a)&&a.length>0?J("group",a.map(t=>({text:t.group,value:t._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],S=t=>{i(r,q(t),()=>{u(!1),h.resetFields()})},G=t=>{i(r,Q(t))},L=t=>{i(r,R(t))},v=t=>{i(r,U(t),()=>{g(!1),d.resetFields()})},E=t=>{i(r,W(t))},M=t=>{i(r,X(t))};return n.useEffect(()=>{c===!0&&r(B())},[]),n.useEffect(()=>{m===!0&&r(O())},[]),e.jsxs(H,{header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"primary",onClick:()=>g(!0),children:"Thêm nhóm"}),e.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm trang"})]}),children:[e.jsx(y,{loading:c,data:P,columns:C,onSave:G,onDelete:L,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(V,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(p,{title:"Xem trang",children:e.jsx(l.Link,{children:e.jsx(Z,{size:22,color:"#006aff"})})})}),e.jsx(p,{title:"Sao chép trang",children:e.jsx(l.Link,{onClick:()=>i(r,z(t._id)),children:e.jsx(ee,{size:22,color:"#55ff00"})})}),A?e.jsx(e.Fragment,{children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{onClick:()=>$("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{href:`/admin/page/${t.slug}`,children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})})]})}),e.jsx(F,{title:"Thêm trang",centered:!0,open:k,onOk:()=>h.submit(),onCancel:()=>u(!1),confirmLoading:c,width:500,children:e.jsx(s,{form:h,name:"customForm",layout:"vertical",onFinish:S,children:e.jsx(s.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(T,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(F,{centered:!0,open:I,confirmLoading:m,onOk:()=>d.submit(),onCancel:()=>g(!1),footer:null,width:600,children:e.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(s,{form:d,name:"customForm",layout:"vertical",onFinish:v,children:[e.jsx(s.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(T,{placeholder:"Nhập nhóm"})}),e.jsx(x,{type:"primary",loading:m,onClick:()=>d.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(y,{loading:m,data:w,isScroll:!1,columns:N,width:"10%",onSave:E,onDelete:M})})}]})})]})};export{Oe as default};

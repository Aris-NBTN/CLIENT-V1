import{c as D,b5 as _,d as b,r as i,j as t,b6 as B,b7 as z,N as O,T as m,ac as n,b8 as V,V as $,b9 as q,ba as Q,bb as R,bc as X,bd as H,be as J}from"./index-BLzEd4n4.js";import{b7 as K}from"./Layout-Bst5Vo9z.js";import{E as y}from"./Table-Bxx_ZSAF.js";import{F as o,a as U}from"./jspdf.es.min-CnS-_-p-.js";import{e as W,f as Y}from"./Format-DS4FwMn6.js";import{w as Z,x as ee,y as j}from"./index-BkE6QgOY.js";import"./html2canvas.esm-CBrSDip1.js";import{F as s}from"./index-Bnj9Y8Ab.js";import{B as x}from"./button-BLmoP8MS.js";import{T as p}from"./index-D9h7xL2N.js";import{M as A}from"./index-BAdybpeW.js";import{I as F}from"./index-HT6McCpU.js";import{T as te}from"./index-SeUHU9Hv.js";import"./animate-D3eBM9nS.js";import"./index-BYI7st5n.js";import"./index-BkhA4-75.js";import"./index-Bk7VKPwO.js";import"./context-HDE3hCe4.js";import"./useClosable-DF0DdXx9.js";import"./EllipsisOutlined-DH7R3b3D.js";import"./Overflow-CE1sZDJR.js";import"./collapse-BbEVqHco.js";import"./index-p5fWdFdd.js";import"./PurePanel-CvO3W_SQ.js";import"./CheckOutlined-DnLyXb8r.js";import"./index-CjLK_A61.js";import"./useLocale-DWC3Bj2-.js";import"./compact-item-Dl7C-00r.js";import"./SearchOutlined-BUKY2D18.js";import"./index-CXXaD3cS.js";import"./responsiveObserver-D88kR1tr.js";import"./iconUtil-DYKrIg6c.js";import"./index-FEicpWCI.js";import"./index-BsiHLG3I.js";import"./TextArea-B8cMsvUT.js";import"./index-CG4YCKAZ.js";import"./index-GhZ32GV6.js";import"./ActionButton-DQkA6vFR.js";import"./row-BuGFnJt0.js";const Ve=()=>{const r=D(),T=_({query:"(max-width: 576px)"}),[c]=s.useForm(),[l]=s.useForm(),{pages:f,loading:h}=b(e=>e.pages),{groupPages:a,loading:d}=b(e=>e.groupPages),[k,u]=i.useState(!1),[I,g]=i.useState(!1),C=i.useMemo(()=>f.map(e=>({...e,key:e._id})),[f]),P=i.useMemo(()=>a.map(e=>({...e,key:e._id})),[a]),w=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,...o({dataIndex:"slug"}),render:e=>`/${e}`},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:e=>t.jsx(W,{keywords:e})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(e=>({label:e.group,value:e._id})):[],render:e=>e&&a&&Array.isArray(a)&&a.length>0?Y(e,a,"group"):null,...Array.isArray(a)&&a.length>0?U("group",a.map(e=>({text:e.group,value:e._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],G=e=>{n(r,q(e),()=>{u(!1),c.resetFields()})},L=e=>{n(r,Q(e))},S=e=>{n(r,R(e))},E=e=>{n(r,X(e),()=>{g(!1),l.resetFields()})},v=e=>{n(r,H(e))},M=e=>{n(r,J(e))};return i.useEffect(()=>{h===!0&&r(B())},[]),i.useEffect(()=>{d===!0&&r(z())},[]),t.jsxs(K,{header:"BÀI VIẾT",button:t.jsxs(t.Fragment,{children:[t.jsx(x,{type:"primary",onClick:()=>g(!0),children:"Thêm nhóm"}),t.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm trang"})]}),children:[t.jsx(y,{loading:h,data:C,columns:w,onSave:L,onDelete:S,width:"12%",button:e=>t.jsxs(t.Fragment,{children:[t.jsx(O,{to:e.slug==="trang-chu"?"/":`/${e.slug}`,target:"_blank",children:t.jsx(m,{title:"Xem trang",children:t.jsx(p.Link,{children:t.jsx(Z,{size:22,color:"#006aff"})})})}),t.jsx(m,{title:"Sao chép trang",children:t.jsx(p.Link,{onClick:()=>n(r,V(e._id)),children:t.jsx(ee,{size:22,color:"#55ff00"})})}),T?t.jsx(t.Fragment,{children:t.jsx(m,{title:"Chỉnh sửa trang",children:t.jsx(p.Link,{onClick:()=>$("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:t.jsx(j,{size:22,color:"rgb(255 127 0)"})})})}):t.jsx("a",{href:`/admin/page/${e.slug}`,children:t.jsx(m,{title:"Chỉnh sửa trang",children:t.jsx(p.Link,{href:`/admin/page/${e.slug}`,children:t.jsx(j,{size:22,color:"rgb(255 127 0)"})})})})]})}),t.jsx(A,{title:"Thêm trang",centered:!0,open:k,onOk:()=>c.submit(),onCancel:()=>u(!1),confirmLoading:h,width:500,children:t.jsx(s,{form:c,name:"customForm",layout:"vertical",onFinish:G,children:t.jsx(s.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:t.jsx(F,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),t.jsx(A,{centered:!0,open:I,confirmLoading:d,onOk:()=>l.submit(),onCancel:()=>g(!1),footer:null,width:600,children:t.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:t.jsx(t.Fragment,{children:t.jsxs(s,{form:l,name:"customForm",layout:"vertical",onFinish:E,children:[t.jsx(s.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:t.jsx(F,{placeholder:"Nhập nhóm"})}),t.jsx(x,{type:"primary",loading:d,onClick:()=>l.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:t.jsx(t.Fragment,{children:t.jsx(y,{loading:d,data:P,isScroll:!1,columns:N,width:"10%",onSave:v,onDelete:M})})}]})})]})};export{Ve as default};

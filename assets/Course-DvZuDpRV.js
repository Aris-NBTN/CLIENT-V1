import{F as se,G as oe,ao as B,H as re,ap as ae,r as l,L as D,aq as Q,ar as ie,o as _,as as le,a5 as ce,a6 as de,a7 as pe,at as ue,au as me,av as he,aw as ge,ax as J,ay as fe,R as k,y as xe,az as ye,aA as ve,O as be,n as je,j as s,f as Ce,e as Oe,V as $e,T as U}from"./index-17j3_jhh.js";import{b7 as Ne}from"./Layout-CnqkQXIy.js";import{U as Pe}from"./index-qX8uwBOz.js";import{V as Te}from"./Video-BanqZI5y.js";import{T as K,l as Se,m as Ee}from"./index-DSby45QQ.js";import"./GrapeJs-BNWSg7cR.js";import{F as z}from"./index-DxMHyJia.js";import{B as w}from"./TextArea-C5OTITsm.js";import{R as X,C as F}from"./row-CVMln90b.js";import{C as H}from"./index-qgM5LueE.js";import{I as W}from"./index-C-lyW4Zm.js";import{T as we}from"./index-yAHRdH1k.js";import{E as ke}from"./index-D6KQ03IW.js";import{M as Ie}from"./index-Dyj80hWL.js";import{R as Fe}from"./CheckOutlined-CNBOWhIt.js";import"./index-YGffwXe8.js";import"./index-CVDCQHbV.js";import"./Overflow-QSuQk7jj.js";import"./SearchOutlined-Dg6MI8kZ.js";import"./EllipsisOutlined-D69bXrbJ.js";import"./progress-Ch3ylJTs.js";import"./index-pIcmO7vC.js";import"./index-C-tum4V9.js";import"./iconUtil-DClnNsh9.js";import"./ActionButton-DwiKZSBD.js";import"./index-D3_bCEGm.js";const Re=n=>{const{componentCls:t,iconCls:r,boxShadow:e,colorText:o,colorSuccess:a,colorError:x,colorWarning:y,colorInfo:p,fontSizeLG:c,motionEaseInOutCirc:u,motionDurationSlow:g,marginXS:N,paddingXS:d,borderRadiusLG:i,zIndexPopup:m,contentPadding:f,contentBg:C}=n,v=`${t}-notice`,j=new B("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:d,transform:"translateY(0)",opacity:1}}),h=new B("MessageMoveOut",{"0%":{maxHeight:n.height,padding:d,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),P={padding:d,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${r}`]:{marginInlineEnd:N,fontSize:c},[`${v}-content`]:{display:"inline-block",padding:f,background:C,borderRadius:i,boxShadow:e,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:a},[`${t}-error > ${r}`]:{color:x},[`${t}-warning > ${r}`]:{color:y},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:p}};return[{[t]:Object.assign(Object.assign({},re(n)),{color:o,position:"fixed",top:N,width:"100%",pointerEvents:"none",zIndex:m,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:j,animationDuration:g,animationPlayState:"paused",animationTimingFunction:u},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:h,animationDuration:g,animationPlayState:"paused",animationTimingFunction:u},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${v}-wrapper`]:Object.assign({},P)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},P),{padding:0,textAlign:"start"})}]},Me=n=>({zIndexPopup:n.zIndexPopupBase+ae+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),Z=se("Message",n=>{const t=oe(n,{height:150});return[Re(t)]},Me);var Ae=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const _e={info:l.createElement(le,null),success:l.createElement(ce,null),error:l.createElement(de,null),warning:l.createElement(pe,null),loading:l.createElement(Fe,null)},ee=n=>{let{prefixCls:t,type:r,icon:e,children:o}=n;return l.createElement("div",{className:_(`${t}-custom-content`,`${t}-${r}`)},e||_e[r],l.createElement("span",null,o))},He=n=>{const{prefixCls:t,className:r,type:e,icon:o,content:a}=n,x=Ae(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:y}=l.useContext(D),p=t||y("message"),c=Q(p),[u,g,N]=Z(p,c);return u(l.createElement(ie,Object.assign({},x,{prefixCls:p,className:_(r,g,`${p}-notice-pure-panel`,N,c),eventKey:"pure",duration:null,content:l.createElement(ee,{prefixCls:p,type:e,icon:o},a)})))};function Ve(n,t){return{motionName:t??`${n}-move-up`}}function L(n){let t;const r=new Promise(o=>{t=n(()=>{o(!0)})}),e=()=>{t==null||t()};return e.then=(o,a)=>r.then(o,a),e.promise=r,e}var ze=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const De=8,Le=3,Ge=n=>{let{children:t,prefixCls:r}=n;const e=Q(r),[o,a,x]=Z(r,e);return o(l.createElement(ge,{classNames:{list:_(a,x,e)}},t))},Be=(n,t)=>{let{prefixCls:r,key:e}=t;return l.createElement(Ge,{prefixCls:r,key:e},n)},Ue=l.forwardRef((n,t)=>{const{top:r,prefixCls:e,getContainer:o,maxCount:a,duration:x=Le,rtl:y,transitionName:p,onAllRemoved:c}=n,{getPrefixCls:u,getPopupContainer:g,message:N,direction:d}=l.useContext(D),i=e||u("message"),m=()=>({left:"50%",transform:"translateX(-50%)",top:r??De}),f=()=>_({[`${i}-rtl`]:y??d==="rtl"}),C=()=>Ve(i,p),v=l.createElement("span",{className:`${i}-close-x`},l.createElement(he,{className:`${i}-close-icon`})),[j,h]=me({prefixCls:i,style:m,className:f,motion:C,closable:!1,closeIcon:v,duration:x,getContainer:()=>(o==null?void 0:o())||(g==null?void 0:g())||document.body,maxCount:a,onAllRemoved:c,renderNotifications:Be});return l.useImperativeHandle(t,()=>Object.assign(Object.assign({},j),{prefixCls:i,message:N})),h});let Y=0;function te(n){const t=l.useRef(null);return ue(),[l.useMemo(()=>{const e=p=>{var c;(c=t.current)===null||c===void 0||c.close(p)},o=p=>{if(!t.current){const S=()=>{};return S.then=()=>{},S}const{open:c,prefixCls:u,message:g}=t.current,N=`${u}-notice`,{content:d,icon:i,type:m,key:f,className:C,style:v,onClose:j}=p,h=ze(p,["content","icon","type","key","className","style","onClose"]);let P=f;return P==null&&(Y+=1,P=`antd-message-${Y}`),L(S=>(c(Object.assign(Object.assign({},h),{key:P,content:l.createElement(ee,{prefixCls:u,type:m,icon:i},d),placement:"top",className:_(m&&`${N}-${m}`,C,g==null?void 0:g.className),style:Object.assign(Object.assign({},g==null?void 0:g.style),v),onClose:()=>{j==null||j(),S()}})),()=>{e(P)}))},x={open:o,destroy:p=>{var c;p!==void 0?e(p):(c=t.current)===null||c===void 0||c.destroy()}};return["info","success","warning","error","loading"].forEach(p=>{const c=(u,g,N)=>{let d;u&&typeof u=="object"&&"content"in u?d=u:d={content:u};let i,m;typeof g=="function"?m=g:(i=g,m=N);const f=Object.assign(Object.assign({onClose:m,duration:i},d),{type:p});return o(f)};x[p]=c}),x},[]),l.createElement(Ue,Object.assign({key:"message-holder"},n,{ref:t}))]}function Ke(n){return te(n)}let T=null,I=n=>n(),M=[],A={};function q(){const{getContainer:n,duration:t,rtl:r,maxCount:e,top:o}=A,a=(n==null?void 0:n())||document.body;return{getContainer:()=>a,duration:t,rtl:r,maxCount:e,top:o}}const Xe=k.forwardRef((n,t)=>{const{messageConfig:r,sync:e}=n,{getPrefixCls:o}=l.useContext(D),a=A.prefixCls||o("message"),x=l.useContext(ve),[y,p]=te(Object.assign(Object.assign(Object.assign({},r),{prefixCls:a}),x.message));return k.useImperativeHandle(t,()=>{const c=Object.assign({},y);return Object.keys(c).forEach(u=>{c[u]=function(){return e(),y[u].apply(y,arguments)}}),{instance:c,sync:e}}),p}),We=k.forwardRef((n,t)=>{const[r,e]=k.useState(q),o=()=>{e(q)};k.useEffect(o,[]);const a=J(),x=a.getRootPrefixCls(),y=a.getIconPrefixCls(),p=a.getTheme(),c=k.createElement(Xe,{ref:t,sync:o,messageConfig:r});return k.createElement(ye,{prefixCls:x,iconPrefixCls:y,theme:p},a.holderRender?a.holderRender(c):c)});function V(){if(!T){const n=document.createDocumentFragment(),t={fragment:n};T=t,I(()=>{fe(k.createElement(We,{ref:r=>{const{instance:e,sync:o}=r||{};Promise.resolve().then(()=>{!t.instance&&e&&(t.instance=e,t.sync=o,V())})}}),n)});return}T.instance&&(M.forEach(n=>{const{type:t,skipped:r}=n;if(!r)switch(t){case"open":{I(()=>{const e=T.instance.open(Object.assign(Object.assign({},A),n.config));e==null||e.then(n.resolve),n.setCloseFn(e)});break}case"destroy":I(()=>{T==null||T.instance.destroy(n.key)});break;default:I(()=>{var e;const o=(e=T.instance)[t].apply(e,xe(n.args));o==null||o.then(n.resolve),n.setCloseFn(o)})}}),M=[])}function Ye(n){A=Object.assign(Object.assign({},A),n),I(()=>{var t;(t=T==null?void 0:T.sync)===null||t===void 0||t.call(T)})}function qe(n){const t=L(r=>{let e;const o={type:"open",config:n,resolve:r,setCloseFn:a=>{e=a}};return M.push(o),()=>{e?I(()=>{e()}):o.skipped=!0}});return V(),t}function Qe(n,t){J();const r=L(e=>{let o;const a={type:n,args:t,resolve:e,setCloseFn:x=>{o=x}};return M.push(a),()=>{o?I(()=>{o()}):a.skipped=!0}});return V(),r}const Je=n=>{M.push({type:"destroy",key:n}),V()},Ze=["success","info","warning","error","loading"],et={open:qe,destroy:Je,config:Ye,useMessage:Ke,_InternalPanelDoNotUseOrYouWillBeFired:He},R=et;Ze.forEach(n=>{R[n]=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return Qe(n,r)}});var tt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},nt=function(t,r){return l.createElement(be,je({},t,{ref:r,icon:tt}))},st=l.forwardRef(nt);const ot={name:"fileVideo",multiple:!1,action:`${Ce}/v1/file/video`,onChange(n){const{status:t,response:r}=n.file;t==="done"?(Oe("Success","Tải file thành công!"),console.log(r)):t==="error"&&($e("Error","Lỗi khi tải file!",r.message),n.fileList=[])},onDrop(n){console.log("Dropped files",n.dataTransfer.files)}},rt=()=>s.jsxs(Pe.Dragger,{data:{folder:"123"},...ot,children:[s.jsxs("p",{className:"ant-upload-drag-icon",children:[" ",s.jsx(st,{})]}),s.jsx("p",{className:"ant-upload-text",children:"Chọn hoặc kéo thả tệp để tải lên"}),s.jsx("p",{className:"ant-upload-hint",children:"Hỗ trợ các file Video"})]}),It=()=>{const n=(d,i)=>{const m=[{src:"https://files.vidstack.io/sprite-fight/subs/english.vtt",label:"English",language:"en-US",kind:"subtitles",default:!0},{src:"https://files.vidstack.io/sprite-fight/subs/spanish.vtt",label:"Spanish",language:"es-ES",kind:"subtitles"},{src:"https://files.vidstack.io/sprite-fight/chapters.vtt",kind:"chapters",language:"en-US",default:!0}],f="",C="https://files.vidstack.io/sprite-fight/poster.webp",v="https://files.vidstack.io/sprite-fight/thumbnails.vtt";return Array.from({length:d},(j,h)=>({title:`aaa_${h}`,key:`aaa_${h}`,children:Array.from({length:i},(P,S)=>({key:`bbb_${h}-${S}`,title:`aaa_Tên  ${h}-${S}`,src:f,poster:C,textTracks:m,thumbnailTracks:v}))}))},[t,r]=l.useState(n(2,4)),[e,o]=l.useState(),[a,x]=l.useState(),[y]=z.useForm(),[p,c]=l.useState(!1),u=(d,i,m)=>{d.some((f,C,v)=>{if(f.key===i)return m(f,C,v);if(f.children)return u(f.children,i,m)})},g=d=>{const{dragNode:i,node:m,dropPosition:f,dropToGap:C}=d,v=m.key,j=i.key,h=[...t],P=(O,$)=>{for(let b=0;b<O.length;b++)if(O[b].children&&O[b].children.findIndex(ne=>ne.key===$)>-1)return O[b];return null},S=P(h,j),G=P(h,v);if(S)if(!C&&m.children){let O;u(h,j,($,b,E)=>{E.splice(b,1),O=$}),u(h,v,$=>{$.children=$.children||[],$.children.unshift(O)}),R.success("Đã di chuyển bài học sang học phần mới")}else if(G&&G.key===S.key){let O;u(h,j,($,b,E)=>{E.splice(b,1),O=$}),u(h,v,($,b,E)=>{E.splice(f<0?b:b+1,0,O)}),R.success("Đã thay đổi thứ tự bài học trong học phần")}else{R.error("Không thể di chuyển bài học ra ngoài học phần");return}else{if(!C&&m.children){R.error("Không thể di chuyển học phần vào bên trong học phần khác");return}let O;u(h,j,($,b,E)=>{E.splice(b,1),O=$}),u(h,v,($,b,E)=>{E.splice(f<0?b:b+1,0,O)}),R.success("Đã thay đổi thứ tự học phần")}r(h)},N=d=>{};return s.jsxs(Ne,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex items-center",children:s.jsx("h6",{className:"mb-0",children:"Khóa học"})})}),button:s.jsxs(s.Fragment,{children:[s.jsx(w,{type:"primary",onClick:()=>c(!0),children:"Thêm học phần"}),s.jsx(w,{type:"primary",onClick:()=>console.log(a),children:"Lưu thông tin"})]}),children:[s.jsxs(X,{children:[s.jsx(F,{span:24,children:s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[s.jsx("h4",{className:"mb-0",children:"Học phần"}),s.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2",children:e!=null&&s.jsx(s.Fragment,{children:s.jsx(W,{addonBefore:`Tên ${e.type==="children"?"Bài học":"Học phần"}`,style:{width:350},value:e.title,onChange:d=>o({...e,title:d.target.value}),placeholder:`Nhập tên ${e.type==="children"?"bài học":"học phần"}`})})})]})}),className:"mb-6",children:s.jsxs(X,{gutter:[20,20],children:[s.jsx(F,{md:{span:6},span:24,children:s.jsx(we,{className:"draggable-tree",style:{overflow:"auto",height:450},draggable:!0,blockNode:!0,showLine:!0,onDrop:g,titleRender:d=>s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx(K.Paragraph,{className:"!m-0",ellipsis:{suffix:""},children:d.title}),s.jsxs("div",{className:"flex gap-1",children:[d.children&&s.jsx(U,{placement:"right",title:"Thêm bài học - học phần",children:s.jsx(w,{className:"p-0",type:"primary",ghost:!0,icon:s.jsx(Se,{}),size:"small",onClick:i=>{i.stopPropagation(),console.log(d)}})}),s.jsx(U,{placement:"right",title:"Xóa",children:s.jsx(w,{className:"p-0",danger:!0,icon:s.jsx(Ee,{}),size:"small",onClick:i=>{i.stopPropagation(),console.log(d)}})})]})]}),onSelect:(d,i)=>{const{key:m,title:f,src:C,poster:v,textTracks:j,thumbnailTracks:h}=i.node;if(d.length===0){o(void 0);return}i.selectedNodes&&i.selectedNodes.length>0&&i.selectedNodes[0].children?o({title:i.node.title,type:"parent"}):(o({title:i.node.title,type:"children"}),x({key:m,title:f,src:C,poster:v,textTracks:j,thumbnailTracks:h}))},treeData:t})}),s.jsx(F,{md:{span:(e==null?void 0:e.type)==="children"?15:18},span:24,children:(e==null?void 0:e.type)==="children"&&(a!=null&&a.src?s.jsx(Te,{height:"450px",src:(a==null?void 0:a.src)||void 0,poster:(a==null?void 0:a.poster)||void 0,textTracks:(a==null?void 0:a.textTracks)||[],thumbnailTracks:(a==null?void 0:a.thumbnailTracks)||void 0}):s.jsx(rt,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-end me-2",children:s.jsx("div",{style:{fontSize:16},children:"Designed by Aris"})})}),footer:"Cho phép tải lên các loại về file video !",title:s.jsxs(s.Fragment,{children:["Tải lên video cho bài học: ",s.jsx(K.Text,{type:"danger",children:e==null?void 0:e.title})]}),api:"http://localhost:8082/v1/file/video"}))||s.jsx(H,{children:s.jsx(ke,{})})}),(e==null?void 0:e.type)==="children"&&(a!=null&&a.src)?s.jsxs(F,{className:"flex flex-col gap-4",md:{span:3},span:24,children:[s.jsx(w,{disabled:!0,type:"primary",ghost:!0,children:"Thêm phụ đề"}),s.jsx(w,{disabled:!0,type:"primary",ghost:!0,children:"Thêm chia đoạn"}),s.jsx(w,{disabled:!0,type:"primary",ghost:!0,children:"Tạo ảnh Thumbnails"}),s.jsx(w,{type:"primary",ghost:!0,children:"Tạo ảnh Poster"}),s.jsx(w,{type:"primary",ghost:!0,danger:!0,children:"Xóa Video"})]}):null]})})}),s.jsx(F,{className:" mb-6",span:24,children:(e==null?void 0:e.type)==="children"&&s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("h4",{className:"mb-0",children:["Nội dung bài học: ",s.jsx("span",{className:"text-danger",children:e==null?void 0:e.title})]})}),className:"editor-grapejs"})}),s.jsx(F,{className:"mb-6",span:24,children:s.jsx(H,{title:"Thông báo",children:"Chưa có thông báo"})})]}),s.jsx(Ie,{title:"Thêm học phần",centered:!0,open:p,onOk:()=>y.submit(),onCancel:()=>c(!1),width:600,children:s.jsx(z,{form:y,name:"customForm",layout:"vertical",onFinish:N,children:s.jsx(z.Item,{className:"mb-2",name:"name",label:"Tên học phần",rules:[{required:!0,message:"Nhập tên học phần!"}],children:s.jsx(W,{placeholder:"Nhập tên học phần"})})})})]})};export{It as default};

import{c as D,aN as _,d as y,r as s,j as e,aO as B,aP as O,N as V,T as p,ac as n,aQ as z,V as $,aR as q,aS as Q,aT as R,aU as U,aV as W,aW as X}from"./index-17j3_jhh.js";import{b7 as H}from"./Layout-CnqkQXIy.js";import{E as j}from"./Table-CavhpM06.js";import{F as o,a as J}from"./jspdf.es.min-C9TVp6C5.js";import{e as K,f as Y}from"./Format-BBvPGMq3.js";import{T as l,w as Z,x as ee,y as b}from"./index-DSby45QQ.js";import"./html2canvas.esm-CBrSDip1.js";import{F as i}from"./index-DxMHyJia.js";import{B as x}from"./TextArea-C5OTITsm.js";import{M as F}from"./index-Dyj80hWL.js";import{I as T}from"./index-C-lyW4Zm.js";import{T as te}from"./index-C-tum4V9.js";import"./index-YGffwXe8.js";import"./index-CVDCQHbV.js";import"./Overflow-QSuQk7jj.js";import"./CheckOutlined-CNBOWhIt.js";import"./index-D6KQ03IW.js";import"./SearchOutlined-Dg6MI8kZ.js";import"./addEventListener-BMr0gDKl.js";import"./iconUtil-DClnNsh9.js";import"./EllipsisOutlined-D69bXrbJ.js";import"./index-CcmnvsJx.js";import"./index-yAHRdH1k.js";import"./index-DN3-H3VG.js";import"./ActionButton-DwiKZSBD.js";import"./index-pIcmO7vC.js";import"./row-CVMln90b.js";import"./index-D3_bCEGm.js";const Se=()=>{const r=D(),A=_({query:"(max-width: 576px)"}),[h]=i.useForm(),[d]=i.useForm(),{pages:f,loading:c}=y(t=>t.pages),{groupPages:a,loading:m}=y(t=>t.groupPages),[k,u]=s.useState(!1),[I,g]=s.useState(!1),P=s.useMemo(()=>f.map(t=>({...t,key:t._id})),[f]),w=s.useMemo(()=>a.map(t=>({...t,key:t._id})),[a]),C=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,ellipsis:{showTitle:!0},...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,ellipsis:{showTitle:!0},...o({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(l.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(K,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&a.length>0?Y(t,a,"group"):null,...Array.isArray(a)&&a.length>0?J("group",a.map(t=>({text:t.group,value:t._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],S=t=>{n(r,q(t),()=>{u(!1),h.resetFields()})},G=t=>{n(r,Q(t))},L=t=>{n(r,R(t))},E=t=>{n(r,U(t),()=>{g(!1),d.resetFields()})},v=t=>{n(r,W(t))},M=t=>{n(r,X(t))};return s.useEffect(()=>{c===!0&&r(B())},[]),s.useEffect(()=>{m===!0&&r(O())},[]),e.jsxs(H,{header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"primary",onClick:()=>g(!0),children:"Thêm nhóm"}),e.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm trang"})]}),children:[e.jsx(j,{loading:c,data:P,columns:C,onSave:G,onDelete:L,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(V,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(p,{title:"Xem trang",children:e.jsx(l.Link,{children:e.jsx(Z,{size:22,color:"#006aff"})})})}),e.jsx(p,{title:"Sao chép trang",children:e.jsx(l.Link,{onClick:()=>n(r,z(t._id)),children:e.jsx(ee,{size:22,color:"#55ff00"})})}),A?e.jsx(e.Fragment,{children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{onClick:()=>$("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{href:`/admin/page/${t.slug}`,children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})})]})}),e.jsx(F,{title:"Thêm trang",centered:!0,open:k,onOk:()=>h.submit(),onCancel:()=>u(!1),confirmLoading:c,width:500,children:e.jsx(i,{form:h,name:"customForm",layout:"vertical",onFinish:S,children:e.jsx(i.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(T,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(F,{centered:!0,open:I,confirmLoading:m,onOk:()=>d.submit(),onCancel:()=>g(!1),footer:null,width:600,children:e.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(i,{form:d,name:"customForm",layout:"vertical",onFinish:E,children:[e.jsx(i.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(T,{placeholder:"Nhập nhóm"})}),e.jsx(x,{type:"primary",loading:m,onClick:()=>d.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(j,{loading:m,data:w,isScroll:!1,columns:N,width:"10%",onSave:v,onDelete:M})})}]})})]})};export{Se as default};

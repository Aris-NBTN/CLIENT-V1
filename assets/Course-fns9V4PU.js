import{r as v,O as z,n as B,j as e,f as D,e as I,W as K,T as A}from"./index-Ca-ywajW.js";import{b7 as U}from"./Layout-BoplMKg2.js";import{U as G}from"./index-BGTeNL6G.js";import{V as X}from"./Video-BRcXxKuq.js";import{T as E,j as q,k as W}from"./index-DwMj5orM.js";import"./GrapeJs-DDs7N3I1.js";import{F as S}from"./index-DEz6s2ne.js";import{B as m}from"./TextArea-BGDHj_Xu.js";import{R as M,C as y}from"./row-Bc2UZi5r.js";import{C}from"./index-_GS6a7Gy.js";import{I as O}from"./index-C_xNPb7d.js";import{T as J}from"./index-DIMlAJc2.js";import{E as Q}from"./index-BkKP-bp6.js";import{M as Y}from"./index-DNZNwrlU.js";import{s as T}from"./index-BYJ3_o0O.js";import"./index-CDdRk5rc.js";import"./index-QJ3ETuZ9.js";import"./Overflow-pX7p5_Au.js";import"./CheckOutlined-DPvv86UP.js";import"./SearchOutlined-CU1oLW5s.js";import"./context-BPytJE9N.js";import"./EllipsisOutlined-D2qaaC01.js";import"./progress-BjVIq0d6.js";import"./index-DeworCSe.js";import"./index-B4ezo7p-.js";import"./PlusOutlined-BDAEAEux.js";import"./iconUtil-CRocJbJK.js";import"./index-BVaqU8xN.js";var Z={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},ee=function(x,b){return v.createElement(z,B({},x,{ref:b,icon:Z}))},se=v.forwardRef(ee);const te={name:"fileVideo",multiple:!1,action:`${D}/v1/file/video`,onChange(g){const{status:x,response:b}=g.file;x==="done"?(I("Success","Tải file thành công!"),console.log(b)):x==="error"&&(K("Error","Lỗi khi tải file!",b.message),g.fileList=[])},onDrop(g){console.log("Dropped files",g.dataTransfer.files)}},re=()=>e.jsxs(G.Dragger,{data:{folder:"123"},...te,children:[e.jsxs("p",{className:"ant-upload-drag-icon",children:[" ",e.jsx(se,{})]}),e.jsx("p",{className:"ant-upload-text",children:"Chọn hoặc kéo thả tệp để tải lên"}),e.jsx("p",{className:"ant-upload-hint",children:"Hỗ trợ các file Video"})]}),Ee=()=>{const g=(a,r)=>{const h=[{src:"https://files.vidstack.io/sprite-fight/subs/english.vtt",label:"English",language:"en-US",kind:"subtitles",default:!0},{src:"https://files.vidstack.io/sprite-fight/subs/spanish.vtt",label:"Spanish",language:"es-ES",kind:"subtitles"},{src:"https://files.vidstack.io/sprite-fight/chapters.vtt",kind:"chapters",language:"en-US",default:!0}],c="",u="https://files.vidstack.io/sprite-fight/poster.webp",d="https://files.vidstack.io/sprite-fight/thumbnails.vtt";return Array.from({length:a},(j,n)=>({title:`aaa_${n}`,key:`aaa_${n}`,children:Array.from({length:r},(F,k)=>({key:`bbb_${n}-${k}`,title:`aaa_Tên  ${n}-${k}`,src:c,poster:u,textTracks:h,thumbnailTracks:d}))}))},[x,b]=v.useState(g(2,4)),[s,N]=v.useState(),[t,V]=v.useState(),[w]=S.useForm(),[L,P]=v.useState(!1),f=(a,r,h)=>{a.some((c,u,d)=>{if(c.key===r)return h(c,u,d);if(c.children)return f(c.children,r,h)})},H=a=>{const{dragNode:r,node:h,dropPosition:c,dropToGap:u}=a,d=h.key,j=r.key,n=[...x],F=(l,o)=>{for(let i=0;i<l.length;i++)if(l[i].children&&l[i].children.findIndex(_=>_.key===o)>-1)return l[i];return null},k=F(n,j),$=F(n,d);if(k)if(!u&&h.children){let l;f(n,j,(o,i,p)=>{p.splice(i,1),l=o}),f(n,d,o=>{o.children=o.children||[],o.children.unshift(l)}),T.success("Đã di chuyển bài học sang học phần mới")}else if($&&$.key===k.key){let l;f(n,j,(o,i,p)=>{p.splice(i,1),l=o}),f(n,d,(o,i,p)=>{p.splice(c<0?i:i+1,0,l)}),T.success("Đã thay đổi thứ tự bài học trong học phần")}else{T.error("Không thể di chuyển bài học ra ngoài học phần");return}else{if(!u&&h.children){T.error("Không thể di chuyển học phần vào bên trong học phần khác");return}let l;f(n,j,(o,i,p)=>{p.splice(i,1),l=o}),f(n,d,(o,i,p)=>{p.splice(c<0?i:i+1,0,l)}),T.success("Đã thay đổi thứ tự học phần")}b(n)},R=a=>{};return e.jsxs(U,{header:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("h6",{className:"mb-0",children:"Khóa học"})})}),button:e.jsxs(e.Fragment,{children:[e.jsx(m,{type:"primary",onClick:()=>P(!0),children:"Thêm học phần"}),e.jsx(m,{type:"primary",onClick:()=>console.log(t),children:"Lưu thông tin"})]}),children:[e.jsxs(M,{children:[e.jsx(y,{span:24,children:e.jsx(C,{title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[e.jsx("h4",{className:"mb-0",children:"Học phần"}),e.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2",children:s!=null&&e.jsx(e.Fragment,{children:e.jsx(O,{addonBefore:`Tên ${s.type==="children"?"Bài học":"Học phần"}`,style:{width:350},value:s.title,onChange:a=>N({...s,title:a.target.value}),placeholder:`Nhập tên ${s.type==="children"?"bài học":"học phần"}`})})})]})}),className:"mb-6",children:e.jsxs(M,{gutter:[20,20],children:[e.jsx(y,{md:{span:6},span:24,children:e.jsx(J,{className:"draggable-tree",style:{overflow:"auto",height:450},draggable:!0,blockNode:!0,showLine:!0,onDrop:H,titleRender:a=>e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx(E.Paragraph,{className:"!m-0",ellipsis:{suffix:""},children:a.title}),e.jsxs("div",{className:"flex gap-1",children:[a.children&&e.jsx(A,{placement:"right",title:"Thêm bài học - học phần",children:e.jsx(m,{className:"p-0",type:"primary",ghost:!0,icon:e.jsx(q,{}),size:"small",onClick:r=>{r.stopPropagation(),console.log(a)}})}),e.jsx(A,{placement:"right",title:"Xóa",children:e.jsx(m,{className:"p-0",danger:!0,icon:e.jsx(W,{}),size:"small",onClick:r=>{r.stopPropagation(),console.log(a)}})})]})]}),onSelect:(a,r)=>{const{key:h,title:c,src:u,poster:d,textTracks:j,thumbnailTracks:n}=r.node;if(a.length===0){N(void 0);return}r.selectedNodes&&r.selectedNodes.length>0&&r.selectedNodes[0].children?N({title:r.node.title,type:"parent"}):(N({title:r.node.title,type:"children"}),V({key:h,title:c,src:u,poster:d,textTracks:j,thumbnailTracks:n}))},treeData:x})}),e.jsx(y,{md:{span:(s==null?void 0:s.type)==="children"?15:18},span:24,children:(s==null?void 0:s.type)==="children"&&(t!=null&&t.src?e.jsx(X,{height:"450px",src:(t==null?void 0:t.src)||void 0,poster:(t==null?void 0:t.poster)||void 0,textTracks:(t==null?void 0:t.textTracks)||[],thumbnailTracks:(t==null?void 0:t.thumbnailTracks)||void 0}):e.jsx(re,{header:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-end me-2",children:e.jsx("div",{style:{fontSize:16},children:"Designed by Aris"})})}),footer:"Cho phép tải lên các loại về file video !",title:e.jsxs(e.Fragment,{children:["Tải lên video cho bài học: ",e.jsx(E.Text,{type:"danger",children:s==null?void 0:s.title})]}),api:"http://localhost:8082/v1/file/video"}))||e.jsx(C,{children:e.jsx(Q,{})})}),(s==null?void 0:s.type)==="children"&&(t!=null&&t.src)?e.jsxs(y,{className:"flex flex-col gap-4",md:{span:3},span:24,children:[e.jsx(m,{disabled:!0,type:"primary",ghost:!0,children:"Thêm phụ đề"}),e.jsx(m,{disabled:!0,type:"primary",ghost:!0,children:"Thêm chia đoạn"}),e.jsx(m,{disabled:!0,type:"primary",ghost:!0,children:"Tạo ảnh Thumbnails"}),e.jsx(m,{type:"primary",ghost:!0,children:"Tạo ảnh Poster"}),e.jsx(m,{type:"primary",ghost:!0,danger:!0,children:"Xóa Video"})]}):null]})})}),e.jsx(y,{className:" mb-6",span:24,children:(s==null?void 0:s.type)==="children"&&e.jsx(C,{title:e.jsx(e.Fragment,{children:e.jsxs("h4",{className:"mb-0",children:["Nội dung bài học: ",e.jsx("span",{className:"text-danger",children:s==null?void 0:s.title})]})}),className:"editor-grapejs"})}),e.jsx(y,{className:"mb-6",span:24,children:e.jsx(C,{title:"Thông báo",children:"Chưa có thông báo"})})]}),e.jsx(Y,{title:"Thêm học phần",centered:!0,open:L,onOk:()=>w.submit(),onCancel:()=>P(!1),width:600,children:e.jsx(S,{form:w,name:"customForm",layout:"vertical",onFinish:R,children:e.jsx(S.Item,{className:"mb-2",name:"name",label:"Tên học phần",rules:[{required:!0,message:"Nhập tên học phần!"}],children:e.jsx(O,{placeholder:"Nhập tên học phần"})})})})]})};export{Ee as default};

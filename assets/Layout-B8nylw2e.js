import{a as ne,o as se,q as ae,v as re,r as o,s as m,b$ as ie,c0 as oe,j as e,a9 as ce}from"./index-Cc-1vpYl.js";import{H as le,B as de,D as ue,M as he,C as me,E as fe,G as pe,A as U}from"./index-CG-qH4GJ.js";const je=({title:$,description:G,keywords:K,author:Q,ldJson:f={},children:V})=>{var v,k,b,w,E,M,S,L,_,D,A,C,H,I,T,F,N,q;const p=ne(),{pathname:W}=se(),x=ae(),{token:{colorPrimary:X}}=re.useToken(),[Y,g]=o.useState(!1),y=o.useRef(null),t=m(n=>n.menu),j=m(n=>n.menu.status),{user:a}=m(n=>n.auth),{info:s,loading:Z}=m(n=>n.info),J=n=>{const i=new DOMParser().parseFromString(n,"text/html"),c=[];return i.querySelectorAll(".nav__menu > ul > li").forEach(u=>{const z=u.querySelector(".nav__link > a"),P={key:z.getAttribute("href"),label:z.textContent.trim()},te=u.querySelectorAll(".dropdown__menu.dropdown-aris > li"),h=[];te.forEach(B=>{const R=B.querySelector(".dropdown__link > h4 > a"),d={key:R.getAttribute("href"),label:R.textContent.trim(),children:[]};B.querySelectorAll(".dropdown__submenu.dropdown-aris > li > a").forEach(O=>{d.children.push({key:O.getAttribute("href"),label:O.textContent.trim()})}),d.children.length>0?h.push(d):h.push({label:d.label,key:d.key})}),h.length>0&&(P.children=h),c.push(P)}),c};function ee(n){return n.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()}return o.useEffect(()=>{window.scrollTo(0,0)},[W]),o.useEffect(()=>{const n=i=>{const c=i.target.closest("a");if(c&&c.href){const l=new URL(c.href),u=l.pathname+l.search+l.hash;l.origin===window.location.origin&&(i.preventDefault(),p(u))}},r=document.getElementById("root");return r&&r.addEventListener("click",n),()=>{r&&r.removeEventListener("click",n)}},[p]),o.useEffect(()=>{j==="idle"&&x(ie())},[x,j]),o.useEffect(()=>{var n;if((n=t==null?void 0:t.menuItems)!=null&&n.header){const r=document.getElementById("menu-mobile"),i=()=>g(!0);return r&&r.addEventListener("click",i),()=>{r&&r.removeEventListener("click",i)}}},[t]),o.useEffect(()=>{const n=document.getElementById("icon-user");if(a!=null&&a.userType&&n){n.innerHTML="",y.current||(y.current=oe(n));const r=y.current,i=()=>a!=null&&a.avatar?e.jsx(U,{src:a==null?void 0:a.avatar,size:40}):e.jsxs(U,{style:{backgroundColor:X},size:40,children:[" ",ee(a==null?void 0:a.name)," "]});r.render(e.jsxs(e.Fragment,{children:["  ",i()," "]}))}},[a,t]),o.useEffect(()=>{Z&&x(ce())},[]),e.jsxs(le,{children:[e.jsxs(de,{children:[e.jsx("meta",{name:"description",content:G||((v=s[0])==null?void 0:v.description)}),e.jsx("meta",{name:"keywords",content:K||((k=s[0])==null?void 0:k.keywords)}),e.jsx("meta",{name:"author",content:Q||((b=s[0])==null?void 0:b.manage)}),e.jsx("title",{children:$||((w=s[0])==null?void 0:w.name)}),typeof f=="object"&&Object.keys(f).length>0&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(f)})]}),((E=t==null?void 0:t.menuItems)==null?void 0:E.css)&&e.jsx(e.Fragment,{children:e.jsx("style",{dangerouslySetInnerHTML:{__html:(M=t==null?void 0:t.menuItems)==null?void 0:M.css}})}),((S=t==null?void 0:t.menuItems)==null?void 0:S.header)&&e.jsx(e.Fragment,{children:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:500},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(L=t==null?void 0:t.menuItems)==null?void 0:L.header}})})}),e.jsx("div",{style:{minHeight:"calc(93vh - 6rem)"},children:V}),e.jsx("div",{dangerouslySetInnerHTML:{__html:(_=t==null?void 0:t.menuItems)==null?void 0:_.footer}}),e.jsx(ue,{title:(A=(D=s==null?void 0:s.newData)==null?void 0:D[0])==null?void 0:A.name,placement:"left",onClose:()=>g(!1),open:Y,width:256,children:e.jsxs("div",{className:"flex flex-col justify-between",style:{height:"100%"},children:[e.jsx(he,{mode:"inline",onClick:n=>{g(!1),setTimeout(()=>{p(n.key)},500)},style:{width:256},items:J((C=t==null?void 0:t.menuItems)==null?void 0:C.header)}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(me,{size:22}),(I=(H=s==null?void 0:s.newData)==null?void 0:H[0])==null?void 0:I.email]}),e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(fe,{size:22}),(F=(T=s==null?void 0:s.newData)==null?void 0:T[0])==null?void 0:F.phone]}),e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(pe,{size:22}),(q=(N=s==null?void 0:s.newData)==null?void 0:N[0])==null?void 0:q.address]})]})]})})]})};export{je as L};

import{c as B,aA as L,d as y,r as s,j as e,aB as _,aC as z,T as m,N as O,ac as n,aD as q,W as V,aE as $,aF as H,aG as J,aH as Q,aI as R,aJ as W}from"./index-Vh6CaCBN.js";import{b7 as X}from"./Layout-jN7qPcNq.js";import{E as j}from"./Table-Crc6bo15.js";import{F as o,a as K}from"./jspdf.es.min-C1K3v54W.js";import{e as U,f as Y}from"./Format-BeuPj0QM.js";import{T as g,u as Z,v as ee,w as b}from"./index-C3Ojar74.js";import"./html2canvas.esm-CBrSDip1.js";import{F as i}from"./index-Ipm8_GBV.js";import{B as x}from"./TextArea-BYLBHmx3.js";import{M as F}from"./index-BrEj49SH.js";import{I as A}from"./index-Cgd3kYe6.js";import{T as te}from"./index-B8b-72vl.js";import"./index-COWI_zw8.js";import"./index-A4s6Kzr0.js";import"./Overflow-Nzkb4Z8L.js";import"./CheckOutlined-r7Yp9YwM.js";import"./index-BTDpC-Sw.js";import"./SearchOutlined-5O5MTolL.js";import"./context-DmvJlOEW.js";import"./addEventListener-Dmas9DE0.js";import"./iconUtil-C8ZsRQOI.js";import"./EllipsisOutlined-BN5h1C5H.js";import"./index-C43ZZzPO.js";import"./index-FX5ujNAR.js";import"./index-CHXci339.js";import"./index-DO3-EIkb.js";import"./row-BIs4APoP.js";import"./index-CvUlTMya.js";import"./PlusOutlined-D9eby9oE.js";const Ee=()=>{const r=B(),T=L({query:"(max-width: 576px)"}),[p]=i.useForm(),[l]=i.useForm(),{pages:f,loading:c}=y(t=>t.pages),{groupPages:a,loading:d}=y(t=>t.groupPages),[I,h]=s.useState(!1),[k,u]=s.useState(!1),w=s.useMemo(()=>f.map(t=>({...t,key:t._id})),[f]),C=s.useMemo(()=>a.map(t=>({...t,key:t._id})),[a]),P=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,ellipsis:{showTitle:!0},...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,ellipsis:{showTitle:!0},...o({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(g.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(U,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&a.length>0?Y(t,a,"group"):null,...Array.isArray(a)&&a.length>0?K("group",a.map(t=>({text:t.group,value:t._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],G=t=>{n(r,$(t),()=>{h(!1),p.resetFields()})},E=t=>{n(r,H(t))},S=t=>{n(r,J(t))},v=t=>{n(r,Q(t),()=>{u(!1),l.resetFields()})},D=t=>{n(r,R(t))},M=t=>{n(r,W(t))};return s.useEffect(()=>{c===!0&&r(_())},[]),s.useEffect(()=>{d===!0&&r(z())},[]),e.jsxs(X,{header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm nhóm"}),e.jsx(x,{type:"primary",onClick:()=>h(!0),children:"Thêm trang"})]}),children:[e.jsx(j,{loading:c,data:w,columns:P,onSave:E,onDelete:S,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Xem trang",children:e.jsx(O,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(Z,{size:22,color:"#006aff"})})}),e.jsx(m,{title:"Sao chép trang",children:e.jsx(g,{onClick:()=>n(r,q(t._id)),children:e.jsx(ee,{size:22,color:"#55ff00"})})}),T?e.jsx(e.Fragment,{children:e.jsx(m,{title:"Chỉnh sửa trang",children:e.jsx(g.Link,{onClick:()=>V("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx(m,{title:"Chỉnh sửa trang",children:e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})]})}),e.jsx(F,{title:"Thêm trang",centered:!0,open:I,onOk:()=>p.submit(),onCancel:()=>h(!1),confirmLoading:c,width:500,children:e.jsx(i,{form:p,name:"customForm",layout:"vertical",onFinish:G,children:e.jsx(i.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(A,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(F,{centered:!0,open:k,confirmLoading:d,onOk:()=>l.submit(),onCancel:()=>u(!1),footer:null,width:600,children:e.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(i,{form:l,name:"customForm",layout:"vertical",onFinish:v,children:[e.jsx(i.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(A,{placeholder:"Nhập nhóm"})}),e.jsx(x,{type:"primary",loading:d,onClick:()=>l.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(j,{loading:d,data:C,isScroll:!1,columns:N,width:"10%",onSave:D,onDelete:M})})}]})})]})};export{Ee as default};

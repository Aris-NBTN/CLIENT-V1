import{G as se,H as oe,a6 as L,J as re,a7 as ae,r as d,C as D,a8 as J,a9 as ie,z as _,aa as le,R as ce,M as de,O as pe,ab as me,ac as ue,ad as he,ae as ge,af as Q,ag as fe,ah as w,ai as ye,aj as xe,ak as be,j as s,al as U}from"./index-DlYMrpPW.js";import{b7 as ve}from"./Layout-CpjJMsYa.js";import{F as Ce}from"./FileUi-tWFbWOWJ.js";import{V as je}from"./Video-V8AXbpHj.js";import{k as Oe,l as $e}from"./index-BhRu2L4p.js";import"./GrapeJs-Chn_j19O.js";/* empty css                */import{F as z}from"./index-BcyQc9y1.js";import{B as k}from"./button-CE-BZK77.js";import{R as V,C as I}from"./row-BjQvrOOl.js";import{C as H}from"./index-C9QsRXmP.js";import{I as X}from"./index-P5rlzTpu.js";import{T as Ne}from"./index-BURokasu.js";import{T as W}from"./index-BA5SGM9y.js";import{E as Pe}from"./index-DWBsL6Py.js";import{M as Te}from"./index-CO9Q68ww.js";import{R as Se}from"./compact-item-DVIPdewI.js";import"./animate-q5OpxXju.js";import"./context-C-Rv8Q9P.js";import"./index-B0WLfmks.js";import"./index-DJL_NHcj.js";import"./index-DXcoRrUW.js";import"./EllipsisOutlined--Rr4Zdtn.js";import"./Overflow-CkeVNlGt.js";import"./collapse-BbEVqHco.js";import"./index-BYNFFT4D.js";import"./PurePanel-CgvgODcO.js";import"./TextArea-BL_qZjFp.js";import"./SearchOutlined-DFBtPtmd.js";import"./useLocale-AUr8qwmz.js";import"./index-RbKsYPWi.js";import"./responsiveObserver--9lCBinC.js";import"./index.es-E0pdLPqV.js";import"./index-BzZmPurf.js";import"./iconUtil-DQgXce6J.js";import"./ActionButton-Cwh1PuVf.js";const Ee=n=>{const{componentCls:t,iconCls:r,boxShadow:e,colorText:o,colorSuccess:a,colorError:y,colorWarning:x,colorInfo:p,fontSizeLG:l,motionEaseInOutCirc:m,motionDurationSlow:g,marginXS:N,paddingXS:c,borderRadiusLG:i,zIndexPopup:u,contentPadding:f,contentBg:j}=n,b=`${t}-notice`,C=new L("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:c,transform:"translateY(0)",opacity:1}}),h=new L("MessageMoveOut",{"0%":{maxHeight:n.height,padding:c,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),P={padding:c,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${r}`]:{marginInlineEnd:N,fontSize:l},[`${b}-content`]:{display:"inline-block",padding:f,background:j,borderRadius:i,boxShadow:e,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:a},[`${t}-error > ${r}`]:{color:y},[`${t}-warning > ${r}`]:{color:x},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:p}};return[{[t]:Object.assign(Object.assign({},re(n)),{color:o,position:"fixed",top:N,width:"100%",pointerEvents:"none",zIndex:u,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:C,animationDuration:g,animationPlayState:"paused",animationTimingFunction:m},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:h,animationDuration:g,animationPlayState:"paused",animationTimingFunction:m},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${b}-wrapper`]:Object.assign({},P)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},P),{padding:0,textAlign:"start"})}]},ke=n=>({zIndexPopup:n.zIndexPopupBase+ae+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),Z=se("Message",n=>{const t=oe(n,{height:150});return[Ee(t)]},ke);var we=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const Fe={info:d.createElement(le,null),success:d.createElement(ce,null),error:d.createElement(de,null),warning:d.createElement(pe,null),loading:d.createElement(Se,null)},ee=n=>{let{prefixCls:t,type:r,icon:e,children:o}=n;return d.createElement("div",{className:_(`${t}-custom-content`,`${t}-${r}`)},e||Fe[r],d.createElement("span",null,o))},Ie=n=>{const{prefixCls:t,className:r,type:e,icon:o,content:a}=n,y=we(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:x}=d.useContext(D),p=t||x("message"),l=J(p),[m,g,N]=Z(p,l);return m(d.createElement(ie,Object.assign({},y,{prefixCls:p,className:_(r,g,`${p}-notice-pure-panel`,N,l),eventKey:"pure",duration:null,content:d.createElement(ee,{prefixCls:p,type:e,icon:o},a)})))};function Me(n,t){return{motionName:t??`${n}-move-up`}}function B(n){let t;const r=new Promise(o=>{t=n(()=>{o(!0)})}),e=()=>{t==null||t()};return e.then=(o,a)=>r.then(o,a),e.promise=r,e}var Re=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const Ae=8,_e=3,He=n=>{let{children:t,prefixCls:r}=n;const e=J(r),[o,a,y]=Z(r,e);return o(d.createElement(ge,{classNames:{list:_(a,y,e)}},t))},Ge=(n,t)=>{let{prefixCls:r,key:e}=t;return d.createElement(He,{prefixCls:r,key:e},n)},ze=d.forwardRef((n,t)=>{const{top:r,prefixCls:e,getContainer:o,maxCount:a,duration:y=_e,rtl:x,transitionName:p,onAllRemoved:l}=n,{getPrefixCls:m,getPopupContainer:g,message:N,direction:c}=d.useContext(D),i=e||m("message"),u=()=>({left:"50%",transform:"translateX(-50%)",top:r??Ae}),f=()=>_({[`${i}-rtl`]:x??c==="rtl"}),j=()=>Me(i,p),b=d.createElement("span",{className:`${i}-close-x`},d.createElement(he,{className:`${i}-close-icon`})),[C,h]=ue({prefixCls:i,style:u,className:f,motion:j,closable:!1,closeIcon:b,duration:y,getContainer:()=>(o==null?void 0:o())||(g==null?void 0:g())||document.body,maxCount:a,onAllRemoved:l,renderNotifications:Ge});return d.useImperativeHandle(t,()=>Object.assign(Object.assign({},C),{prefixCls:i,message:N})),h});let Y=0;function te(n){const t=d.useRef(null);return me(),[d.useMemo(()=>{const e=p=>{var l;(l=t.current)===null||l===void 0||l.close(p)},o=p=>{if(!t.current){const S=()=>{};return S.then=()=>{},S}const{open:l,prefixCls:m,message:g}=t.current,N=`${m}-notice`,{content:c,icon:i,type:u,key:f,className:j,style:b,onClose:C}=p,h=Re(p,["content","icon","type","key","className","style","onClose"]);let P=f;return P==null&&(Y+=1,P=`antd-message-${Y}`),B(S=>(l(Object.assign(Object.assign({},h),{key:P,content:d.createElement(ee,{prefixCls:m,type:u,icon:i},c),placement:"top",className:_(u&&`${N}-${u}`,j,g==null?void 0:g.className),style:Object.assign(Object.assign({},g==null?void 0:g.style),b),onClose:()=>{C==null||C(),S()}})),()=>{e(P)}))},y={open:o,destroy:p=>{var l;p!==void 0?e(p):(l=t.current)===null||l===void 0||l.destroy()}};return["info","success","warning","error","loading"].forEach(p=>{const l=(m,g,N)=>{let c;m&&typeof m=="object"&&"content"in m?c=m:c={content:m};let i,u;typeof g=="function"?u=g:(i=g,u=N);const f=Object.assign(Object.assign({onClose:u,duration:i},c),{type:p});return o(f)};y[p]=l}),y},[]),d.createElement(ze,Object.assign({key:"message-holder"},n,{ref:t}))]}function De(n){return te(n)}let T=null,F=n=>n(),R=[],A={};function q(){const{getContainer:n,duration:t,rtl:r,maxCount:e,top:o}=A,a=(n==null?void 0:n())||document.body;return{getContainer:()=>a,duration:t,rtl:r,maxCount:e,top:o}}const Be=w.forwardRef((n,t)=>{const{messageConfig:r,sync:e}=n,{getPrefixCls:o}=d.useContext(D),a=A.prefixCls||o("message"),y=d.useContext(be),[x,p]=te(Object.assign(Object.assign(Object.assign({},r),{prefixCls:a}),y.message));return w.useImperativeHandle(t,()=>{const l=Object.assign({},x);return Object.keys(l).forEach(m=>{l[m]=function(){return e(),x[m].apply(x,arguments)}}),{instance:l,sync:e}}),p}),Ke=w.forwardRef((n,t)=>{const[r,e]=w.useState(q),o=()=>{e(q)};w.useEffect(o,[]);const a=Q(),y=a.getRootPrefixCls(),x=a.getIconPrefixCls(),p=a.getTheme(),l=w.createElement(Be,{ref:t,sync:o,messageConfig:r});return w.createElement(xe,{prefixCls:y,iconPrefixCls:x,theme:p},a.holderRender?a.holderRender(l):l)});function G(){if(!T){const n=document.createDocumentFragment(),t={fragment:n};T=t,F(()=>{fe(w.createElement(Ke,{ref:r=>{const{instance:e,sync:o}=r||{};Promise.resolve().then(()=>{!t.instance&&e&&(t.instance=e,t.sync=o,G())})}}),n)});return}T.instance&&(R.forEach(n=>{const{type:t,skipped:r}=n;if(!r)switch(t){case"open":{F(()=>{const e=T.instance.open(Object.assign(Object.assign({},A),n.config));e==null||e.then(n.resolve),n.setCloseFn(e)});break}case"destroy":F(()=>{T==null||T.instance.destroy(n.key)});break;default:F(()=>{var e;const o=(e=T.instance)[t].apply(e,ye(n.args));o==null||o.then(n.resolve),n.setCloseFn(o)})}}),R=[])}function Le(n){A=Object.assign(Object.assign({},A),n),F(()=>{var t;(t=T==null?void 0:T.sync)===null||t===void 0||t.call(T)})}function Ue(n){const t=B(r=>{let e;const o={type:"open",config:n,resolve:r,setCloseFn:a=>{e=a}};return R.push(o),()=>{e?F(()=>{e()}):o.skipped=!0}});return G(),t}function Ve(n,t){Q();const r=B(e=>{let o;const a={type:n,args:t,resolve:e,setCloseFn:y=>{o=y}};return R.push(a),()=>{o?F(()=>{o()}):a.skipped=!0}});return G(),r}const Xe=n=>{R.push({type:"destroy",key:n}),G()},We=["success","info","warning","error","loading"],Ye={open:Ue,destroy:Xe,config:Le,useMessage:De,_InternalPanelDoNotUseOrYouWillBeFired:Ie},M=Ye;We.forEach(n=>{M[n]=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return Ve(n,r)}});const Ft=()=>{const n=(c,i)=>{const u=[{src:"https://files.vidstack.io/sprite-fight/subs/english.vtt",label:"English",language:"en-US",kind:"subtitles",default:!0},{src:"https://files.vidstack.io/sprite-fight/subs/spanish.vtt",label:"Spanish",language:"es-ES",kind:"subtitles"},{src:"https://files.vidstack.io/sprite-fight/chapters.vtt",kind:"chapters",language:"en-US",default:!0}],f="",j="https://files.vidstack.io/sprite-fight/poster.webp",b="https://files.vidstack.io/sprite-fight/thumbnails.vtt";return Array.from({length:c},(C,h)=>({title:`aaa_${h}`,key:`aaa_${h}`,children:Array.from({length:i},(P,S)=>({key:`bbb_${h}-${S}`,title:`aaa_Tên học phầnasdsadasdddddddddd ${h}-${S}`,src:f,poster:j,textTracks:u,thumbnailTracks:b}))}))},[t,r]=d.useState(n(2,4)),[e,o]=d.useState(),[a,y]=d.useState(),[x]=z.useForm(),[p,l]=d.useState(!1),m=(c,i,u)=>{c.some((f,j,b)=>{if(f.key===i)return u(f,j,b);if(f.children)return m(f.children,i,u)})},g=c=>{const{dragNode:i,node:u,dropPosition:f,dropToGap:j}=c,b=u.key,C=i.key,h=[...t],P=(O,$)=>{for(let v=0;v<O.length;v++)if(O[v].children&&O[v].children.findIndex(ne=>ne.key===$)>-1)return O[v];return null},S=P(h,C),K=P(h,b);if(S)if(!j&&u.children){let O;m(h,C,($,v,E)=>{E.splice(v,1),O=$}),m(h,b,$=>{$.children=$.children||[],$.children.unshift(O)}),M.success("Đã di chuyển bài học sang học phần mới")}else if(K&&K.key===S.key){let O;m(h,C,($,v,E)=>{E.splice(v,1),O=$}),m(h,b,($,v,E)=>{E.splice(f<0?v:v+1,0,O)}),M.success("Đã thay đổi thứ tự bài học trong học phần")}else{M.error("Không thể di chuyển bài học ra ngoài học phần");return}else{if(!j&&u.children){M.error("Không thể di chuyển học phần vào bên trong học phần khác");return}let O;m(h,C,($,v,E)=>{E.splice(v,1),O=$}),m(h,b,($,v,E)=>{E.splice(f<0?v:v+1,0,O)}),M.success("Đã thay đổi thứ tự học phần")}r(h)},N=c=>{};return s.jsxs(ve,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex items-center",children:s.jsx("h6",{className:"mb-0",children:"Khóa học"})})}),button:s.jsx(s.Fragment,{children:s.jsx(k,{type:"primary",onClick:()=>l(!0),children:"Thêm học phần"})}),children:[s.jsxs(V,{children:[s.jsx(I,{span:24,children:s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[s.jsx("h4",{className:"mb-0",children:"Học phần"}),s.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2",children:e!=null&&s.jsxs(s.Fragment,{children:[s.jsx(X,{addonBefore:`Tên ${e.type==="children"?"Bài học":"Học phần"}`,style:{width:350},value:e.title,onChange:c=>o({...e,title:c.target.value}),placeholder:`Nhập tên ${e.type==="children"?"bài học":"học phần"}`}),s.jsx(k,{type:"primary",onClick:()=>console.log(a),children:"Lưu thông tin"})]})})]})}),className:"mb-6",children:s.jsxs(V,{gutter:[20,20],children:[s.jsx(I,{md:{span:6},span:24,children:s.jsx(Ne,{className:"draggable-tree",style:{overflow:"auto",height:500},draggable:!0,blockNode:!0,showLine:!0,onDrop:g,titleRender:c=>s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx(W.Paragraph,{className:"!m-0",ellipsis:{suffix:""},children:c.title}),s.jsxs("div",{className:"flex gap-1",children:[c.children&&s.jsx(U,{placement:"right",title:"Thêm bài học - học phần",children:s.jsx(k,{className:"p-0",type:"primary",ghost:!0,icon:s.jsx(Oe,{}),size:"small",onClick:i=>{i.stopPropagation(),console.log(c)}})}),s.jsx(U,{placement:"right",title:"Xóa",children:s.jsx(k,{className:"p-0",danger:!0,icon:s.jsx($e,{}),size:"small",onClick:i=>{i.stopPropagation(),console.log(c)}})})]})]}),onSelect:(c,i)=>{const{key:u,title:f,src:j,poster:b,textTracks:C,thumbnailTracks:h}=i.node;if(c.length===0){o(void 0);return}i.selectedNodes&&i.selectedNodes.length>0&&i.selectedNodes[0].children?o({title:i.node.title,type:"parent"}):(o({title:i.node.title,type:"children"}),y({key:u,title:f,src:j,poster:b,textTracks:C,thumbnailTracks:h}))},treeData:t})}),s.jsx(I,{md:{span:(e==null?void 0:e.type)==="children"?15:18},span:24,children:(e==null?void 0:e.type)==="children"&&(a!=null&&a.src?s.jsx(je,{height:"500px",src:(a==null?void 0:a.src)||void 0,poster:(a==null?void 0:a.poster)||void 0,textTracks:(a==null?void 0:a.textTracks)||[],thumbnailTracks:(a==null?void 0:a.thumbnailTracks)||void 0}):s.jsx(Ce,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-end me-2",children:s.jsx("div",{style:{fontSize:16},children:"Designed by Aris"})})}),footer:"Cho phép tải lên các loại về file video !",title:s.jsxs(s.Fragment,{children:["Tải lên video cho bài học: ",s.jsx(W.Text,{type:"danger",children:e==null?void 0:e.title})]}),api:"http://localhost:8082/v1/file/video"}))||s.jsx(H,{children:s.jsx(Pe,{})})}),(e==null?void 0:e.type)==="children"&&(a!=null&&a.src)?s.jsxs(I,{className:"flex flex-col gap-4",md:{span:3},span:24,children:[s.jsx(k,{disabled:!0,type:"primary",ghost:!0,children:"Thêm phụ đề"}),s.jsx(k,{disabled:!0,type:"primary",ghost:!0,children:"Thêm chia đoạn"}),s.jsx(k,{disabled:!0,type:"primary",ghost:!0,children:"Tạo ảnh Thumbnails"}),s.jsx(k,{type:"primary",ghost:!0,children:"Tạo ảnh Poster"}),s.jsx(k,{type:"primary",ghost:!0,danger:!0,children:"Xóa Video"})]}):null]})})}),s.jsx(I,{className:" mb-6",span:24,children:(e==null?void 0:e.type)==="children"&&s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("h4",{className:"mb-0",children:["Nội dung bài học: ",s.jsx("span",{className:"text-danger",children:e==null?void 0:e.title})]})}),className:"editor-grapejs"})}),s.jsx(I,{className:"mb-6",span:24,children:s.jsx(H,{title:"Thông báo",children:"Chưa có thông báo"})})]}),s.jsx(Te,{title:"Thêm học phần",centered:!0,open:p,onOk:()=>x.submit(),onCancel:()=>l(!1),width:600,children:s.jsx(z,{form:x,name:"customForm",layout:"vertical",onFinish:N,children:s.jsx(z.Item,{className:"mb-2",name:"name",label:"Tên học phần",rules:[{required:!0,message:"Nhập tên học phần!"}],children:s.jsx(X,{placeholder:"Nhập tên học phần"})})})})]})};export{Ft as default};

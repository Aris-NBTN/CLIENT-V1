import{c as M,ax as B,d as y,r as i,j as t,ay as _,az as z,N as O,al as m,V as n,aA as V,s as $,aB as q,aC as Q,aD as R,aE as X,aF as H,aG as J}from"./index-DlYMrpPW.js";import{b7 as K}from"./Layout-CpjJMsYa.js";import{E as j}from"./Table-BZPB0-lF.js";import{F as o,a as U}from"./jspdf.es.min-DIvpoIaq.js";import{e as W,f as Y}from"./Format-DVssGH0h.js";import{w as Z,x as ee,y as b}from"./index-BhRu2L4p.js";import"./html2canvas.esm-CBrSDip1.js";import{F as s}from"./index-BcyQc9y1.js";import{B as x}from"./button-CE-BZK77.js";import{T as p}from"./index-BA5SGM9y.js";import{M as A}from"./index-CO9Q68ww.js";import{I as F}from"./index-P5rlzTpu.js";import{T as te}from"./index-BzZmPurf.js";import"./animate-q5OpxXju.js";import"./context-C-Rv8Q9P.js";import"./index-B0WLfmks.js";import"./index-DJL_NHcj.js";import"./index-DXcoRrUW.js";import"./EllipsisOutlined--Rr4Zdtn.js";import"./Overflow-CkeVNlGt.js";import"./collapse-BbEVqHco.js";import"./index-BYNFFT4D.js";import"./PurePanel-CgvgODcO.js";import"./TextArea-BL_qZjFp.js";import"./compact-item-DVIPdewI.js";import"./index-DWBsL6Py.js";import"./useLocale-AUr8qwmz.js";import"./SearchOutlined-DFBtPtmd.js";import"./index-RbKsYPWi.js";import"./responsiveObserver--9lCBinC.js";import"./iconUtil-DQgXce6J.js";import"./index-xGiB6SMK.js";import"./index-DIwEvQnT.js";import"./index-BURokasu.js";import"./index-CKNSBnWp.js";import"./ActionButton-Cwh1PuVf.js";import"./index-Be9Ssfp7.js";import"./row-BjQvrOOl.js";const Oe=()=>{const r=M(),k=B({query:"(max-width: 576px)"}),[h]=s.useForm(),[l]=s.useForm(),{pages:f,loading:c}=y(e=>e.pages),{groupPages:a,loading:d}=y(e=>e.groupPages),[T,u]=i.useState(!1),[I,g]=i.useState(!1),C=i.useMemo(()=>f.map(e=>({...e,key:e._id})),[f]),P=i.useMemo(()=>a.map(e=>({...e,key:e._id})),[a]),w=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,...o({dataIndex:"slug"}),render:e=>`/${e}`},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:e=>t.jsx(W,{keywords:e})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(e=>({label:e.group,value:e._id})):[],render:e=>e&&a&&Array.isArray(a)&&a.length>0?Y(e,a,"group"):null,...Array.isArray(a)&&a.length>0?U("group",a.map(e=>({text:e.group,value:e._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],G=e=>{n(r,q(e),()=>{u(!1),h.resetFields()})},E=e=>{n(r,Q(e))},L=e=>{n(r,R(e))},S=e=>{n(r,X(e),()=>{g(!1),l.resetFields()})},v=e=>{n(r,H(e))},D=e=>{n(r,J(e))};return i.useEffect(()=>{c===!0&&r(_())},[]),i.useEffect(()=>{d===!0&&r(z())},[]),t.jsxs(K,{header:"BÀI VIẾT",button:t.jsxs(t.Fragment,{children:[t.jsx(x,{type:"primary",onClick:()=>g(!0),children:"Thêm nhóm"}),t.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm trang"})]}),children:[t.jsx(j,{loading:c,data:C,columns:w,onSave:E,onDelete:L,width:"12%",button:e=>t.jsxs(t.Fragment,{children:[t.jsx(O,{to:e.slug==="trang-chu"?"/":`/${e.slug}`,target:"_blank",children:t.jsx(m,{title:"Xem trang",children:t.jsx(p.Link,{children:t.jsx(Z,{size:22,color:"#006aff"})})})}),t.jsx(m,{title:"Sao chép trang",children:t.jsx(p.Link,{onClick:()=>n(r,V(e._id)),children:t.jsx(ee,{size:22,color:"#55ff00"})})}),k?t.jsx(t.Fragment,{children:t.jsx(m,{title:"Chỉnh sửa trang",children:t.jsx(p.Link,{onClick:()=>$("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:t.jsx(b,{size:22,color:"rgb(255 127 0)"})})})}):t.jsx("a",{href:`/admin/page/${e.slug}`,children:t.jsx(m,{title:"Chỉnh sửa trang",children:t.jsx(p.Link,{href:`/admin/page/${e.slug}`,children:t.jsx(b,{size:22,color:"rgb(255 127 0)"})})})})]})}),t.jsx(A,{title:"Thêm trang",centered:!0,open:T,onOk:()=>h.submit(),onCancel:()=>u(!1),confirmLoading:c,width:500,children:t.jsx(s,{form:h,name:"customForm",layout:"vertical",onFinish:G,children:t.jsx(s.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:t.jsx(F,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),t.jsx(A,{centered:!0,open:I,confirmLoading:d,onOk:()=>l.submit(),onCancel:()=>g(!1),footer:null,width:600,children:t.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:t.jsx(t.Fragment,{children:t.jsxs(s,{form:l,name:"customForm",layout:"vertical",onFinish:S,children:[t.jsx(s.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:t.jsx(F,{placeholder:"Nhập nhóm"})}),t.jsx(x,{type:"primary",loading:d,onClick:()=>l.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:t.jsx(t.Fragment,{children:t.jsx(j,{loading:d,data:P,isScroll:!1,columns:N,width:"10%",onSave:v,onDelete:D})})}]})})]})};export{Oe as default};

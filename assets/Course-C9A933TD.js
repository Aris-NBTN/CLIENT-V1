import{F as se,G as oe,aC as V,H as re,aN as ae,r as d,L as G,aq as Q,aO as ie,o as _,aP as le,a5 as ce,a6 as de,a7 as pe,aQ as ue,aR as me,an as he,aS as ge,aT as J,aU as fe,R as w,y as ye,aV as xe,aW as ve,j as s,a1 as be,e as Ce,T as B}from"./index-CC5vRMP5.js";import{b7 as je}from"./Layout-zlMpK_db.js";import{D as Oe,F as Ne}from"./index.es-D7RKetue.js";import{V as $e}from"./Video-CMZ9e0yK.js";import{k as Pe,l as Se}from"./index-Clfji-uc.js";import"./GrapeJs-CoYblpYf.js";import{F as U}from"./index-DlJmYXCC.js";import{B as E}from"./button-DJmvMEWz.js";import{R as K,C as I}from"./row-DOSbYOLn.js";import{C as H}from"./index-_XIzsU_b.js";import{I as W}from"./index-CoQjZLs5.js";import{T as Te}from"./index-y2QNPw3h.js";import{T as X}from"./index-C4XHQaZm.js";import{E as Fe}from"./index-e7s5ZlbN.js";import{M as Ee}from"./index-CLZN0Zct.js";import{R as we}from"./compact-item-DuMzL5mX.js";import"./animate-Bj5-0d4O.js";import"./context-tYGI9KnH.js";import"./index-53pAMRUt.js";import"./index-zo9mVXRT.js";import"./EllipsisOutlined-uJaeI7TV.js";import"./Overflow-CChWt4no.js";import"./collapse-BbEVqHco.js";import"./index-B9fWF7uT.js";import"./PurePanel-DlQnJE-A.js";import"./CheckOutlined-CHgmzZfi.js";import"./SearchOutlined-Cwlx-Od_.js";import"./useLocale-CBlb5VE2.js";import"./index-CzhzgBUx.js";import"./responsiveObserver-DykE4B8J.js";import"./index-B-5JIJAe.js";import"./index-B5iuyhec.js";import"./TextArea-CmZpNcxr.js";import"./iconUtil-BDsVq4jq.js";import"./ActionButton-DY7nODMh.js";const ke=n=>{const{componentCls:t,iconCls:r,boxShadow:e,colorText:o,colorSuccess:a,colorError:y,colorWarning:x,colorInfo:p,fontSizeLG:c,motionEaseInOutCirc:u,motionDurationSlow:h,marginXS:m,paddingXS:i,borderRadiusLG:l,zIndexPopup:g,contentPadding:v,contentBg:O}=n,b=`${t}-notice`,j=new V("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:i,transform:"translateY(0)",opacity:1}}),f=new V("MessageMoveOut",{"0%":{maxHeight:n.height,padding:i,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),P={padding:i,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${r}`]:{marginInlineEnd:m,fontSize:c},[`${b}-content`]:{display:"inline-block",padding:v,background:O,borderRadius:l,boxShadow:e,pointerEvents:"all"},[`${t}-success > ${r}`]:{color:a},[`${t}-error > ${r}`]:{color:y},[`${t}-warning > ${r}`]:{color:x},[`${t}-info > ${r},
      ${t}-loading > ${r}`]:{color:p}};return[{[t]:Object.assign(Object.assign({},re(n)),{color:o,position:"fixed",top:m,width:"100%",pointerEvents:"none",zIndex:g,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:j,animationDuration:h,animationPlayState:"paused",animationTimingFunction:u},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:f,animationDuration:h,animationPlayState:"paused",animationTimingFunction:u},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${b}-wrapper`]:Object.assign({},P)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},P),{padding:0,textAlign:"start"})}]},Ie=n=>({zIndexPopup:n.zIndexPopupBase+ae+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),Z=se("Message",n=>{const t=oe(n,{height:150});return[ke(t)]},Ie);var Me=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const Re={info:d.createElement(le,null),success:d.createElement(ce,null),error:d.createElement(de,null),warning:d.createElement(pe,null),loading:d.createElement(we,null)},ee=n=>{let{prefixCls:t,type:r,icon:e,children:o}=n;return d.createElement("div",{className:_(`${t}-custom-content`,`${t}-${r}`)},e||Re[r],d.createElement("span",null,o))},Ae=n=>{const{prefixCls:t,className:r,type:e,icon:o,content:a}=n,y=Me(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:x}=d.useContext(G),p=t||x("message"),c=Q(p),[u,h,m]=Z(p,c);return u(d.createElement(ie,Object.assign({},y,{prefixCls:p,className:_(r,h,`${p}-notice-pure-panel`,m,c),eventKey:"pure",duration:null,content:d.createElement(ee,{prefixCls:p,type:e,icon:o},a)})))};function _e(n,t){return{motionName:t??`${n}-move-up`}}function z(n){let t;const r=new Promise(o=>{t=n(()=>{o(!0)})}),e=()=>{t==null||t()};return e.then=(o,a)=>r.then(o,a),e.promise=r,e}var He=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};const De=8,Ue=3,Ge=n=>{let{children:t,prefixCls:r}=n;const e=Q(r),[o,a,y]=Z(r,e);return o(d.createElement(ge,{classNames:{list:_(a,y,e)}},t))},ze=(n,t)=>{let{prefixCls:r,key:e}=t;return d.createElement(Ge,{prefixCls:r,key:e},n)},Le=d.forwardRef((n,t)=>{const{top:r,prefixCls:e,getContainer:o,maxCount:a,duration:y=Ue,rtl:x,transitionName:p,onAllRemoved:c}=n,{getPrefixCls:u,getPopupContainer:h,message:m,direction:i}=d.useContext(G),l=e||u("message"),g=()=>({left:"50%",transform:"translateX(-50%)",top:r??De}),v=()=>_({[`${l}-rtl`]:x??i==="rtl"}),O=()=>_e(l,p),b=d.createElement("span",{className:`${l}-close-x`},d.createElement(he,{className:`${l}-close-icon`})),[j,f]=me({prefixCls:l,style:g,className:v,motion:O,closable:!1,closeIcon:b,duration:y,getContainer:()=>(o==null?void 0:o())||(h==null?void 0:h())||document.body,maxCount:a,onAllRemoved:c,renderNotifications:ze});return d.useImperativeHandle(t,()=>Object.assign(Object.assign({},j),{prefixCls:l,message:m})),f});let Y=0;function te(n){const t=d.useRef(null);return ue(),[d.useMemo(()=>{const e=p=>{var c;(c=t.current)===null||c===void 0||c.close(p)},o=p=>{if(!t.current){const T=()=>{};return T.then=()=>{},T}const{open:c,prefixCls:u,message:h}=t.current,m=`${u}-notice`,{content:i,icon:l,type:g,key:v,className:O,style:b,onClose:j}=p,f=He(p,["content","icon","type","key","className","style","onClose"]);let P=v;return P==null&&(Y+=1,P=`antd-message-${Y}`),z(T=>(c(Object.assign(Object.assign({},f),{key:P,content:d.createElement(ee,{prefixCls:u,type:g,icon:l},i),placement:"top",className:_(g&&`${m}-${g}`,O,h==null?void 0:h.className),style:Object.assign(Object.assign({},h==null?void 0:h.style),b),onClose:()=>{j==null||j(),T()}})),()=>{e(P)}))},y={open:o,destroy:p=>{var c;p!==void 0?e(p):(c=t.current)===null||c===void 0||c.destroy()}};return["info","success","warning","error","loading"].forEach(p=>{const c=(u,h,m)=>{let i;u&&typeof u=="object"&&"content"in u?i=u:i={content:u};let l,g;typeof h=="function"?g=h:(l=h,g=m);const v=Object.assign(Object.assign({onClose:g,duration:l},i),{type:p});return o(v)};y[p]=c}),y},[]),d.createElement(Le,Object.assign({key:"message-holder"},n,{ref:t}))]}function Ve(n){return te(n)}let S=null,k=n=>n(),R=[],A={};function q(){const{getContainer:n,duration:t,rtl:r,maxCount:e,top:o}=A,a=(n==null?void 0:n())||document.body;return{getContainer:()=>a,duration:t,rtl:r,maxCount:e,top:o}}const Be=w.forwardRef((n,t)=>{const{messageConfig:r,sync:e}=n,{getPrefixCls:o}=d.useContext(G),a=A.prefixCls||o("message"),y=d.useContext(ve),[x,p]=te(Object.assign(Object.assign(Object.assign({},r),{prefixCls:a}),y.message));return w.useImperativeHandle(t,()=>{const c=Object.assign({},x);return Object.keys(c).forEach(u=>{c[u]=function(){return e(),x[u].apply(x,arguments)}}),{instance:c,sync:e}}),p}),Ke=w.forwardRef((n,t)=>{const[r,e]=w.useState(q),o=()=>{e(q)};w.useEffect(o,[]);const a=J(),y=a.getRootPrefixCls(),x=a.getIconPrefixCls(),p=a.getTheme(),c=w.createElement(Be,{ref:t,sync:o,messageConfig:r});return w.createElement(xe,{prefixCls:y,iconPrefixCls:x,theme:p},a.holderRender?a.holderRender(c):c)});function D(){if(!S){const n=document.createDocumentFragment(),t={fragment:n};S=t,k(()=>{fe(w.createElement(Ke,{ref:r=>{const{instance:e,sync:o}=r||{};Promise.resolve().then(()=>{!t.instance&&e&&(t.instance=e,t.sync=o,D())})}}),n)});return}S.instance&&(R.forEach(n=>{const{type:t,skipped:r}=n;if(!r)switch(t){case"open":{k(()=>{const e=S.instance.open(Object.assign(Object.assign({},A),n.config));e==null||e.then(n.resolve),n.setCloseFn(e)});break}case"destroy":k(()=>{S==null||S.instance.destroy(n.key)});break;default:k(()=>{var e;const o=(e=S.instance)[t].apply(e,ye(n.args));o==null||o.then(n.resolve),n.setCloseFn(o)})}}),R=[])}function We(n){A=Object.assign(Object.assign({},A),n),k(()=>{var t;(t=S==null?void 0:S.sync)===null||t===void 0||t.call(S)})}function Xe(n){const t=z(r=>{let e;const o={type:"open",config:n,resolve:r,setCloseFn:a=>{e=a}};return R.push(o),()=>{e?k(()=>{e()}):o.skipped=!0}});return D(),t}function Ye(n,t){J();const r=z(e=>{let o;const a={type:n,args:t,resolve:e,setCloseFn:y=>{o=y}};return R.push(a),()=>{o?k(()=>{o()}):a.skipped=!0}});return D(),r}const qe=n=>{R.push({type:"destroy",key:n}),D()},Qe=["success","info","warning","error","loading"],Je={open:Xe,destroy:qe,config:We,useMessage:Ve,_InternalPanelDoNotUseOrYouWillBeFired:Ae},M=Je;Qe.forEach(n=>{M[n]=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return Ye(n,r)}});const Ze=({api:n,title:t,header:r,footer:e})=>{const[o,a]=d.useState([]),y=m=>{a(m)},x=m=>{a(o.filter(i=>i.id!==m))},p=()=>{be("video","Đang tải file...")},c=m=>{Ce("video","Tải file thành công"),a([])},u=m=>{a(o.map(i=>i.id===m?{...i,uploadStatus:"aborted"}:{...i}))},h=m=>{a(o.map(i=>i.id===m?{...i,uploadStatus:void 0}:{...i}))};return s.jsx(s.Fragment,{children:s.jsx(Oe,{style:{width:"100%",height:300},onChange:y,minHeight:"195px",value:o,accept:"image/*, video/*",label:t,groupUpload:!1,uploadConfig:{autoUpload:!0,url:n,method:"POST",uploadLabel:"fileVideo"},onUploadStart:p,onUploadFinish:c,headerConfig:{customHeader:r},footerConfig:{customMessage:e},children:o.map(m=>d.createElement(Ne,{...m,key:m.id,onDelete:x,onAbort:u,onCancel:h,resultOnTooltip:!0,alwaysActive:!0,preview:!0,info:!0}))})})},Rt=()=>{const n=(i,l)=>{const g=[{src:"https://files.vidstack.io/sprite-fight/subs/english.vtt",label:"English",language:"en-US",kind:"subtitles",default:!0},{src:"https://files.vidstack.io/sprite-fight/subs/spanish.vtt",label:"Spanish",language:"es-ES",kind:"subtitles"},{src:"https://files.vidstack.io/sprite-fight/chapters.vtt",kind:"chapters",language:"en-US",default:!0}],v="",O="https://files.vidstack.io/sprite-fight/poster.webp",b="https://files.vidstack.io/sprite-fight/thumbnails.vtt";return Array.from({length:i},(j,f)=>({title:`aaa_${f}`,key:`aaa_${f}`,children:Array.from({length:l},(P,T)=>({key:`bbb_${f}-${T}`,title:`aaa_Tên học phầnasdsadasdddddddddd ${f}-${T}`,src:v,poster:O,textTracks:g,thumbnailTracks:b}))}))},[t,r]=d.useState(n(2,4)),[e,o]=d.useState(),[a,y]=d.useState(),[x]=U.useForm(),[p,c]=d.useState(!1),u=(i,l,g)=>{i.some((v,O,b)=>{if(v.key===l)return g(v,O,b);if(v.children)return u(v.children,l,g)})},h=i=>{const{dragNode:l,node:g,dropPosition:v,dropToGap:O}=i,b=g.key,j=l.key,f=[...t],P=(N,$)=>{for(let C=0;C<N.length;C++)if(N[C].children&&N[C].children.findIndex(ne=>ne.key===$)>-1)return N[C];return null},T=P(f,j),L=P(f,b);if(T)if(!O&&g.children){let N;u(f,j,($,C,F)=>{F.splice(C,1),N=$}),u(f,b,$=>{$.children=$.children||[],$.children.unshift(N)}),M.success("Đã di chuyển bài học sang học phần mới")}else if(L&&L.key===T.key){let N;u(f,j,($,C,F)=>{F.splice(C,1),N=$}),u(f,b,($,C,F)=>{F.splice(v<0?C:C+1,0,N)}),M.success("Đã thay đổi thứ tự bài học trong học phần")}else{M.error("Không thể di chuyển bài học ra ngoài học phần");return}else{if(!O&&g.children){M.error("Không thể di chuyển học phần vào bên trong học phần khác");return}let N;u(f,j,($,C,F)=>{F.splice(C,1),N=$}),u(f,b,($,C,F)=>{F.splice(v<0?C:C+1,0,N)}),M.success("Đã thay đổi thứ tự học phần")}r(f)},m=i=>{};return s.jsxs(je,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex items-center",children:s.jsx("h6",{className:"mb-0",children:"Khóa học"})})}),button:s.jsx(s.Fragment,{children:s.jsx(E,{type:"primary",onClick:()=>c(!0),children:"Thêm học phần"})}),children:[s.jsxs(K,{children:[s.jsx(I,{span:24,children:s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[s.jsx("h4",{className:"mb-0",children:"Học phần"}),s.jsx("div",{className:"flex flex-wrap justify-center items-center gap-2",children:e!=null&&s.jsxs(s.Fragment,{children:[s.jsx(W,{addonBefore:`Tên ${e.type==="children"?"Bài học":"Học phần"}`,style:{width:350},value:e.title,onChange:i=>o({...e,title:i.target.value}),placeholder:`Nhập tên ${e.type==="children"?"bài học":"học phần"}`}),s.jsx(E,{type:"primary",onClick:()=>console.log(a),children:"Lưu thông tin"})]})})]})}),className:"mb-6",children:s.jsxs(K,{gutter:[20,20],children:[s.jsx(I,{md:{span:6},span:24,children:s.jsx(Te,{className:"draggable-tree",style:{overflow:"auto",height:500},draggable:!0,blockNode:!0,showLine:!0,onDrop:h,titleRender:i=>s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx(X.Paragraph,{className:"!m-0",ellipsis:{suffix:""},children:i.title}),s.jsxs("div",{className:"flex gap-1",children:[i.children&&s.jsx(B,{placement:"right",title:"Thêm bài học - học phần",children:s.jsx(E,{className:"p-0",type:"primary",ghost:!0,icon:s.jsx(Pe,{}),size:"small",onClick:l=>{l.stopPropagation(),console.log(i)}})}),s.jsx(B,{placement:"right",title:"Xóa",children:s.jsx(E,{className:"p-0",danger:!0,icon:s.jsx(Se,{}),size:"small",onClick:l=>{l.stopPropagation(),console.log(i)}})})]})]}),onSelect:(i,l)=>{const{key:g,title:v,src:O,poster:b,textTracks:j,thumbnailTracks:f}=l.node;if(i.length===0){o(void 0);return}l.selectedNodes&&l.selectedNodes.length>0&&l.selectedNodes[0].children?o({title:l.node.title,type:"parent"}):(o({title:l.node.title,type:"children"}),y({key:g,title:v,src:O,poster:b,textTracks:j,thumbnailTracks:f}))},treeData:t})}),s.jsx(I,{md:{span:(e==null?void 0:e.type)==="children"?15:18},span:24,children:(e==null?void 0:e.type)==="children"&&(a!=null&&a.src?s.jsx($e,{height:"500px",src:(a==null?void 0:a.src)||void 0,poster:(a==null?void 0:a.poster)||void 0,textTracks:(a==null?void 0:a.textTracks)||[],thumbnailTracks:(a==null?void 0:a.thumbnailTracks)||void 0}):s.jsx(Ze,{header:s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-end me-2",children:s.jsx("div",{style:{fontSize:16},children:"Designed by Aris"})})}),footer:"Cho phép tải lên các loại về file video !",title:s.jsxs(s.Fragment,{children:["Tải lên video cho bài học: ",s.jsx(X.Text,{type:"danger",children:e==null?void 0:e.title})]}),api:"http://localhost:8082/v1/file/video"}))||s.jsx(H,{children:s.jsx(Fe,{})})}),(e==null?void 0:e.type)==="children"&&(a!=null&&a.src)?s.jsxs(I,{className:"flex flex-col gap-4",md:{span:3},span:24,children:[s.jsx(E,{disabled:!0,type:"primary",ghost:!0,children:"Thêm phụ đề"}),s.jsx(E,{disabled:!0,type:"primary",ghost:!0,children:"Thêm chia đoạn"}),s.jsx(E,{disabled:!0,type:"primary",ghost:!0,children:"Tạo ảnh Thumbnails"}),s.jsx(E,{type:"primary",ghost:!0,children:"Tạo ảnh Poster"}),s.jsx(E,{type:"primary",ghost:!0,danger:!0,children:"Xóa Video"})]}):null]})})}),s.jsx(I,{className:" mb-6",span:24,children:(e==null?void 0:e.type)==="children"&&s.jsx(H,{title:s.jsx(s.Fragment,{children:s.jsxs("h4",{className:"mb-0",children:["Nội dung bài học: ",s.jsx("span",{className:"text-danger",children:e==null?void 0:e.title})]})}),className:"editor-grapejs"})}),s.jsx(I,{className:"mb-6",span:24,children:s.jsx(H,{title:"Thông báo",children:"Chưa có thông báo"})})]}),s.jsx(Ee,{title:"Thêm học phần",centered:!0,open:p,onOk:()=>x.submit(),onCancel:()=>c(!1),width:600,children:s.jsx(U,{form:x,name:"customForm",layout:"vertical",onFinish:m,children:s.jsx(U.Item,{className:"mb-2",name:"name",label:"Tên học phần",rules:[{required:!0,message:"Nhập tên học phần!"}],children:s.jsx(W,{placeholder:"Nhập tên học phần"})})})})]})};export{Rt as default};

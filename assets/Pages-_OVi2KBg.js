import{c as L,aO as _,d as y,r as s,j as e,aP as z,aQ as B,T as m,N as O,ad as n,aR as V,W as q,aS as $,aT as Q,aU as R,aV as W,aW as X,aX as U}from"./index-CxLmWmje.js";import{b7 as H}from"./Layout-UVZXzBti.js";import{E as j}from"./Table-DbDq3G3V.js";import{F as o,a as J}from"./jspdf.es.min-CA5OUZDQ.js";import{e as K,f as Y}from"./Format-BzEXiGhB.js";import{T as g,x as Z,y as ee,z as b}from"./index-DgEZE7uO.js";import"./html2canvas.esm-CBrSDip1.js";import{F as i}from"./index-CBnbQrRz.js";import{B as x}from"./TextArea-wEl3k6cm.js";import{M as F}from"./index-BDBdAz-e.js";import{I as T}from"./index-B6vs-NSI.js";import{T as te}from"./index-DuDwVMCg.js";import"./index-DnRodcto.js";import"./index-BXVs_dfy.js";import"./Overflow-BGDKIUMZ.js";import"./CheckOutlined-BZ-XMaXi.js";import"./index-q-7Ryryb.js";import"./SearchOutlined-otEAxvgf.js";import"./addEventListener-26mhohm2.js";import"./iconUtil-2FN9nnms.js";import"./EllipsisOutlined-ua13AUoL.js";import"./index-B8ZA_qFQ.js";import"./index-Bd3QHma_.js";import"./index-yfEgCbk_.js";import"./ActionButton-C3p7Hd4w.js";import"./index-LcK5sDX7.js";import"./row-BC27SvJu.js";import"./index-C6HVbhQe.js";const Se=()=>{const r=L(),A=_({query:"(max-width: 576px)"}),[p]=i.useForm(),[l]=i.useForm(),{pages:f,loading:c}=y(t=>t.pages),{groupPages:a,loading:d}=y(t=>t.groupPages),[I,h]=s.useState(!1),[k,u]=s.useState(!1),P=s.useMemo(()=>f.map(t=>({...t,key:t._id})),[f]),w=s.useMemo(()=>a.map(t=>({...t,key:t._id})),[a]),C=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,ellipsis:{showTitle:!0},...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,ellipsis:{showTitle:!0},...o({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(g.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(K,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&a.length>0?Y(t,a,"group"):null,...Array.isArray(a)&&a.length>0?J("group",a.map(t=>({text:t.group,value:t._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],S=t=>{n(r,$(t),()=>{h(!1),p.resetFields()})},G=t=>{n(r,Q(t))},E=t=>{n(r,R(t))},v=t=>{n(r,W(t),()=>{u(!1),l.resetFields()})},M=t=>{n(r,X(t))},D=t=>{n(r,U(t))};return s.useEffect(()=>{c===!0&&r(z())},[]),s.useEffect(()=>{d===!0&&r(B())},[]),e.jsxs(H,{header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm nhóm"}),e.jsx(x,{type:"primary",onClick:()=>h(!0),children:"Thêm trang"})]}),children:[e.jsx(j,{loading:c,data:P,columns:C,onSave:G,onDelete:E,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Xem trang",children:e.jsx(O,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(Z,{size:22,color:"#006aff"})})}),e.jsx(m,{title:"Sao chép trang",children:e.jsx(g,{onClick:()=>n(r,V(t._id)),children:e.jsx(ee,{size:22,color:"#55ff00"})})}),A?e.jsx(e.Fragment,{children:e.jsx(m,{title:"Chỉnh sửa trang",children:e.jsx(g.Link,{onClick:()=>q("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx(m,{title:"Chỉnh sửa trang",children:e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(b,{size:22,color:"rgb(255 127 0)"})})})]})}),e.jsx(F,{title:"Thêm trang",centered:!0,open:I,onOk:()=>p.submit(),onCancel:()=>h(!1),confirmLoading:c,width:500,children:e.jsx(i,{form:p,name:"customForm",layout:"vertical",onFinish:S,children:e.jsx(i.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(T,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(F,{centered:!0,open:k,confirmLoading:d,onOk:()=>l.submit(),onCancel:()=>u(!1),footer:null,width:600,children:e.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(i,{form:l,name:"customForm",layout:"vertical",onFinish:v,children:[e.jsx(i.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(T,{placeholder:"Nhập nhóm"})}),e.jsx(x,{type:"primary",loading:d,onClick:()=>l.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(j,{loading:d,data:w,isScroll:!1,columns:N,width:"10%",onSave:M,onDelete:D})})}]})})]})};export{Se as default};

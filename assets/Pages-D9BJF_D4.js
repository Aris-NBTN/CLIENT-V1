import{c as D,b5 as _,d as b,r as n,j as e,b6 as B,b7 as z,N as O,T as p,ac as i,b8 as V,V as $,b9 as q,ba as Q,bb as R,bc as X,bd as H,be as J}from"./index-CewBEJG5.js";import{b7 as K}from"./Layout-BWyIhgsc.js";import{E as y}from"./Table-Cfs9jDis.js";import{F as o,a as U}from"./jspdf.es.min-B0MBFVg5.js";import{e as W,f as Y}from"./Format-kmQ5EXFE.js";import{w as Z,x as ee,y as j}from"./index-DtEo5aVO.js";import"./html2canvas.esm-CBrSDip1.js";import{F as s}from"./index-CUDfQet4.js";import{T as l}from"./index-Bmj1-6_B.js";import{B as x}from"./button-DUa7Kh7Q.js";import{M as F}from"./index-CTX3xgDq.js";import{I as A}from"./index-D8k4Uw7R.js";import{T as te}from"./index-C_tvkeQk.js";import"./index-8C52qBn5.js";import"./index-CX5kxnmB.js";import"./index-BvjGlATc.js";import"./Overflow-CWQQQYEb.js";import"./PurePanel-BiQSc6dC.js";import"./CheckOutlined-B9rnEn5N.js";import"./index-B-OmmF-9.js";import"./useLocale-CG7I0sBF.js";import"./compact-item-DMuXnXta.js";import"./SearchOutlined-B-Zwm6YW.js";import"./context-DSnrQzLd.js";import"./Dropdown-DTDDiuMX.js";import"./EllipsisOutlined-Y_7jWXfS.js";import"./index-frKE_9pM.js";import"./responsiveObserver-B3jrvgIi.js";import"./iconUtil-DRElFfRW.js";import"./index-BQjT6D-i.js";import"./index-DOO5QKko.js";import"./TextArea-DOxyJ0X2.js";import"./index-DlYC6C8x.js";import"./index-mLZ-_8ur.js";import"./ActionButton-5Po6094K.js";import"./row-CXPWh4VH.js";const Be=()=>{const r=D(),T=_({query:"(max-width: 576px)"}),[c]=s.useForm(),[d]=s.useForm(),{pages:f,loading:h}=b(t=>t.pages),{groupPages:a,loading:m}=b(t=>t.groupPages),[k,u]=n.useState(!1),[I,g]=n.useState(!1),w=n.useMemo(()=>f.map(t=>({...t,key:t._id})),[f]),P=n.useMemo(()=>a.map(t=>({...t,key:t._id})),[a]),C=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,ellipsis:{showTitle:!0},...o({dataIndex:"name"})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,ellipsis:{showTitle:!0},...o({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(l.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...o({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...o({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(W,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&a.length>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&a.length>0?Y(t,a,"group"):null,...Array.isArray(a)&&a.length>0?U("group",a.map(t=>({text:t.group,value:t._id}))):{}}],N=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...o({dataIndex:"group"})}],G=t=>{i(r,q(t),()=>{u(!1),c.resetFields()})},L=t=>{i(r,Q(t))},S=t=>{i(r,R(t))},E=t=>{i(r,X(t),()=>{g(!1),d.resetFields()})},v=t=>{i(r,H(t))},M=t=>{i(r,J(t))};return n.useEffect(()=>{h===!0&&r(B())},[]),n.useEffect(()=>{m===!0&&r(z())},[]),e.jsxs(K,{header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[e.jsx(x,{type:"primary",onClick:()=>g(!0),children:"Thêm nhóm"}),e.jsx(x,{type:"primary",onClick:()=>u(!0),children:"Thêm trang"})]}),children:[e.jsx(y,{loading:h,data:w,columns:C,onSave:L,onDelete:S,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(O,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(p,{title:"Xem trang",children:e.jsx(l.Link,{children:e.jsx(Z,{size:22,color:"#006aff"})})})}),e.jsx(p,{title:"Sao chép trang",children:e.jsx(l.Link,{onClick:()=>i(r,V(t._id)),children:e.jsx(ee,{size:22,color:"#55ff00"})})}),T?e.jsx(e.Fragment,{children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{onClick:()=>$("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(j,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(p,{title:"Chỉnh sửa trang",children:e.jsx(l.Link,{href:`/admin/page/${t.slug}`,children:e.jsx(j,{size:22,color:"rgb(255 127 0)"})})})})]})}),e.jsx(F,{title:"Thêm trang",centered:!0,open:k,onOk:()=>c.submit(),onCancel:()=>u(!1),confirmLoading:h,width:500,children:e.jsx(s,{form:c,name:"customForm",layout:"vertical",onFinish:G,children:e.jsx(s.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(A,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(F,{centered:!0,open:I,confirmLoading:m,onOk:()=>d.submit(),onCancel:()=>g(!1),footer:null,width:600,children:e.jsx(te,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(s,{form:d,name:"customForm",layout:"vertical",onFinish:E,children:[e.jsx(s.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(A,{placeholder:"Nhập nhóm"})}),e.jsx(x,{type:"primary",loading:m,onClick:()=>d.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(y,{loading:m,data:P,isScroll:!1,columns:N,width:"10%",onSave:v,onDelete:M})})}]})})]})};export{Be as default};
